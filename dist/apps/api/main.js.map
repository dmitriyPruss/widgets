{"version":3,"file":"main.js","mappings":";;;;;;;AAAa;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB;AACxB,iBAAiB,mBAAO,CAAC,gBAAgB;AACzC,2BAA2B,mBAAO,CAAC,wDAAoB;AACvD,yBAAyB,mBAAO,CAAC,sDAAkB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA,wBAAwB;;;;;;;;AC9BX;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B,GAAG,8BAA8B,GAAG,sCAAsC,GAAG,iCAAiC,GAAG,4BAA4B,GAAG,4BAA4B,GAAG,2BAA2B,GAAG,mCAAmC;AAC9Q;AACA;AACA;AACA,mCAAmC;AACnC,2BAA2B;AAC3B,4BAA4B;AAC5B,4BAA4B;AAC5B,iCAAiC;AACjC,sCAAsC;AACtC,8BAA8B;AAC9B,8BAA8B;;;;;;;;ACbjB;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB;AACpB,iBAAiB,mBAAO,CAAC,gBAAgB;AACzC,uBAAuB,mBAAO,CAAC,mCAAmC;AAClE,4BAA4B,mBAAO,CAAC,QAAQ;AAC5C,wBAAwB,mBAAO,CAAC,eAAe;AAC/C,wBAAwB,mBAAO,CAAC,IAAI;AACpC,eAAe,mBAAO,CAAC,MAAM;AAC7B,6BAA6B,mBAAO,CAAC,0DAAsB;AAC3D,2BAA2B,mBAAO,CAAC,wDAAoB;AACvD,yBAAyB,mBAAO,CAAC,sDAAkB;AACnD,qCAAqC,mBAAO,CAAC,wEAAoC;AACjF,sCAAsC,mBAAO,CAAC,yEAAqC;AACnF,6BAA6B,mBAAO,CAAC,gEAA4B;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,gDAAgD;AAChD;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,gCAAgC;AACpD;AACA,4DAA4D,cAAc;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,oBAAoB,gBAAgB;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA,oBAAoB;;;;;;;;AChNP;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,iBAAiB,mBAAO,CAAC,gBAAgB;AACzC,uBAAuB,mBAAO,CAAC,mCAAmC;AAClE,iBAAiB,mBAAO,CAAC,QAAQ;AACjC,2BAA2B,mBAAO,CAAC,wDAAoB;AACvD;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,wBAAwB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;;;;;;;;AChHR;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,qDAAiB;AACtC,aAAa,mBAAO,CAAC,sDAAkB;AACvC,aAAa,mBAAO,CAAC,mDAAS;AAC9B,aAAa,mBAAO,CAAC,mDAAS;AAC9B,aAAa,mBAAO,CAAC,wDAAc;;;;;;;;ACpBtB;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;;ACDhD;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;;ACDhD;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,2EAA4B;AACjD,aAAa,mBAAO,CAAC,kFAAmC;;;;;;;;ACjB3C;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;;ACDhD;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;;ACDhD;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;A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AAqC,mBAAO,CAAC,sFAAoC;AACjF,sCAAsC,mBAAO,CAAC,uFAAqC;AACnF,6BAA6B,mBAAO,CAAC,8EAA4B;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,gDAAgD;AAChD;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,gCAAgC;AACpD;AACA,4DAA4D,cAAc;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,oBAAoB,gBAAgB;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA,oBAAoB;;;;;;;;AChNP;AACb;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,iBAAiB,mBAAO,CAAC,gBAAgB;AACzC,uBAAuB,mBAAO,CAAC,mCAAmC;AAClE,iBAAiB,mBAAO,CAAC,QAAQ;AACjC,2BAA2B,mBAAO,CAAC,sEAAoB;AACvD;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,wBAAwB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;;;;;;;;AChHR;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,mEAAiB;AACtC,aAAa,mBAAO,CAAC,oEAAkB;AACvC,aAAa,mBAAO,CAAC,iEAAS;AAC9B,aAAa,mBAAO,CAAC,iEAAS;AAC9B,aAAa,mBAAO,CAAC,sEAAc;;;;;;;;ACpBtB;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;;ACDhD;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;;ACDhD;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,yFAA4B;AACjD,aAAa,mBAAO,CAAC,gGAAmC;;;;;;;;ACjB3C;AACb,8CAA6C,EAAE,aAAa,EAAC;;;;;;;;ACDhD;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","sources":["webpack://api/./node_modules/@nestjs/config/dist/config-host.module.js","webpack://api/./node_modules/@nestjs/config/dist/config.constants.js","webpack://api/./node_modules/@nestjs/config/dist/config.module.js","webpack://api/./node_modules/@nestjs/config/dist/config.service.js","webpack://api/./node_modules/@nestjs/config/dist/index.js","webpack://api/./node_modules/@nestjs/config/dist/interfaces/config-factory.interface.js","webpack://api/./node_modules/@nestjs/config/dist/interfaces/config-module-options.interface.js","webpack://api/./node_modules/@nestjs/config/dist/interfaces/index.js","webpack://api/./node_modules/@nestjs/config/dist/types/config-object.type.js","webpack://api/./node_modules/@nestjs/config/dist/types/config.type.js","webpack://api/./node_modules/@nestjs/config/dist/types/index.js","webpack://api/./node_modules/@nestjs/config/dist/types/no-infer.type.js","webpack://api/./node_modules/@nestjs/config/dist/types/path-value.type.js","webpack://api/./node_modules/@nestjs/config/dist/utils/create-config-factory.util.js","webpack://api/./node_modules/@nestjs/config/dist/utils/get-config-token.util.js","webpack://api/./node_modules/@nestjs/config/dist/utils/get-registration-token.util.js","webpack://api/./node_modules/@nestjs/config/dist/utils/index.js","webpack://api/./node_modules/@nestjs/config/dist/utils/merge-configs.util.js","webpack://api/./node_modules/@nestjs/config/dist/utils/register-as.util.js","webpack://api/./node_modules/@nestjs/config/index.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/config-host.module.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/config.constants.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/config.module.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/config.service.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/index.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/interfaces/config-factory.interface.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/interfaces/config-module-options.interface.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/interfaces/index.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/types/config-object.type.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/types/config.type.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/types/index.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/types/no-infer.type.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/types/path-value.type.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/utils/create-config-factory.util.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/utils/get-config-token.util.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/utils/get-registration-token.util.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/utils/index.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/utils/merge-configs.util.js","webpack://api/../../libs/data/node_modules/@nestjs/config/dist/utils/register-as.util.js","webpack://api/../../libs/data/node_modules/@nestjs/config/index.js","webpack://api/./src/app.module.ts","webpack://api/./src/constants/index.ts","webpack://api/./src/controllers/channels.controller.ts","webpack://api/./src/controllers/controllers.module.ts","webpack://api/./src/controllers/health.controller.ts","webpack://api/./src/controllers/users.controller.ts","webpack://api/./src/controllers/widgets.controller.ts","webpack://api/./src/core/logging/logger.middleware.ts","webpack://api/./src/exceptions-filters/all-exceptions.filter.ts","webpack://api/./src/exceptions-filters/bad-request-exceptions.filter.ts","webpack://api/./src/exceptions-filters/base-app-exceptions.filter.ts","webpack://api/./src/exceptions/bad-request-detailed.exception.ts","webpack://api/./src/services/auth.service.ts","webpack://api/./src/services/channels.service.ts","webpack://api/./src/services/client-ivs.service.ts","webpack://api/./src/services/events.service.ts","webpack://api/./src/services/events/widgets-socket.events.ts","webpack://api/./src/services/extensions/filters/base-filters-extensions.ts","webpack://api/./src/services/guard/jwt.guard.ts","webpack://api/./src/services/services.module.ts","webpack://api/./src/services/strategy/jwt.strategy.ts","webpack://api/./src/services/strategy/local.strategy.ts","webpack://api/./src/services/users.service.ts","webpack://api/./src/services/widgets.service.ts","webpack://api/./src/socket/socket.gateway.ts","webpack://api/./src/socket/socket.module.ts","webpack://api/../../libs/data/src/constants/index.ts","webpack://api/../../libs/data/src/database.module.ts","webpack://api/../../libs/data/src/extensions/base-filters-extensions.ts","webpack://api/../../libs/data/src/extensions/index.ts","webpack://api/../../libs/data/src/extensions/list-with-totals-extensions.ts","webpack://api/../../libs/data/src/index.ts","webpack://api/../../libs/data/src/interfaces/index.ts","webpack://api/../../libs/data/src/migrations/20220114133300.CreateUsersTable.ts","webpack://api/../../libs/data/src/migrations/20230118145608.CreateStreamsTable.ts","webpack://api/../../libs/data/src/migrations/20230120171731.CreateWidgetsTable.ts","webpack://api/../../libs/data/src/migrations/20230130235651.AlterStreamsTableRenameTableToChannels.ts","webpack://api/../../libs/data/src/migrations/20230131005425.AlterWidgetsTableRenameColumn.ts","webpack://api/../../libs/data/src/migrations/index.ts","webpack://api/../../libs/data/src/models/channel.entity.ts","webpack://api/../../libs/data/src/models/db-migration.entity.ts","webpack://api/../../libs/data/src/models/index.ts","webpack://api/../../libs/data/src/models/user.entity.ts","webpack://api/../../libs/data/src/models/widget.entity.ts","webpack://api/../../libs/data/src/services/database-migration.service.ts","webpack://api/../../libs/data/src/services/index.ts","webpack://api/../../libs/data/src/services/type-orm-umzug.storage.ts","webpack://api/../../libs/shared/src/enums/ionic-requisites.enum.ts","webpack://api/../../libs/shared/src/enums/socket.enum.ts","webpack://api/../../libs/shared/src/enums/user-roles.enum.ts","webpack://api/../../libs/shared/src/enums/widgets-socket-events.enum.ts","webpack://api/../../libs/shared/src/index.ts","webpack://api/../../libs/shared/src/models/constants/channel-dto.constants.ts","webpack://api/../../libs/shared/src/models/constants/user-dto.constants.ts","webpack://api/../../libs/shared/src/models/constants/widget-dto.constants.ts","webpack://api/../../libs/shared/src/models/dto/channel.dto.ts","webpack://api/../../libs/shared/src/models/dto/list-with-totals.ts","webpack://api/../../libs/shared/src/models/dto/stream-playback.dto.ts","webpack://api/../../libs/shared/src/models/dto/user.dto.ts","webpack://api/../../libs/shared/src/models/dto/widget.dto.ts","webpack://api/external commonjs \"@aws-sdk/client-ivs\"","webpack://api/external commonjs \"@nestjs/common\"","webpack://api/external commonjs \"@nestjs/common/utils/shared.utils\"","webpack://api/external commonjs \"@nestjs/core\"","webpack://api/external commonjs \"@nestjs/event-emitter\"","webpack://api/external commonjs \"@nestjs/jwt\"","webpack://api/external commonjs \"@nestjs/passport\"","webpack://api/external commonjs \"@nestjs/platform-socket.io\"","webpack://api/external commonjs \"@nestjs/serve-static\"","webpack://api/external commonjs \"@nestjs/swagger\"","webpack://api/external commonjs \"@nestjs/terminus\"","webpack://api/external commonjs \"@nestjs/typeorm\"","webpack://api/external commonjs \"@nestjs/websockets\"","webpack://api/external commonjs \"bcryptjs\"","webpack://api/external commonjs \"class-validator\"","webpack://api/external commonjs \"dotenv\"","webpack://api/external commonjs \"dotenv-expand\"","webpack://api/external commonjs \"express\"","webpack://api/external commonjs \"lodash\"","webpack://api/external commonjs \"nest-winston\"","webpack://api/external commonjs \"passport-jwt\"","webpack://api/external commonjs \"passport-local\"","webpack://api/external commonjs \"socket.io\"","webpack://api/external commonjs \"swagger-stats\"","webpack://api/external commonjs \"tslib\"","webpack://api/external commonjs \"typeorm\"","webpack://api/external commonjs \"typeorm/query-builder/SelectQueryBuilder\"","webpack://api/external commonjs \"umzug\"","webpack://api/external commonjs \"uuid\"","webpack://api/external commonjs \"winston\"","webpack://api/external node-commonjs \"fs\"","webpack://api/external node-commonjs \"path\"","webpack://api/webpack/bootstrap","webpack://api/./src/main.ts"],"sourcesContent":["\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigHostModule = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst config_constants_1 = require(\"./config.constants\");\nconst config_service_1 = require(\"./config.service\");\nlet ConfigHostModule = class ConfigHostModule {\n};\nConfigHostModule = __decorate([\n    (0, common_1.Global)(),\n    (0, common_1.Module)({\n        providers: [\n            {\n                provide: config_constants_1.CONFIGURATION_TOKEN,\n                useFactory: () => ({}),\n            },\n            {\n                provide: config_constants_1.CONFIGURATION_SERVICE_TOKEN,\n                useClass: config_service_1.ConfigService,\n            },\n        ],\n        exports: [config_constants_1.CONFIGURATION_TOKEN, config_constants_1.CONFIGURATION_SERVICE_TOKEN],\n    })\n], ConfigHostModule);\nexports.ConfigHostModule = ConfigHostModule;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AS_PROVIDER_METHOD_KEY = exports.VALIDATED_ENV_PROPNAME = exports.PARTIAL_CONFIGURATION_PROPNAME = exports.PARTIAL_CONFIGURATION_KEY = exports.VALIDATED_ENV_LOADER = exports.CONFIGURATION_LOADER = exports.CONFIGURATION_TOKEN = exports.CONFIGURATION_SERVICE_TOKEN = void 0;\n/**\n * Injection tokens\n */\nexports.CONFIGURATION_SERVICE_TOKEN = Symbol('CONFIG_SERVICE');\nexports.CONFIGURATION_TOKEN = 'CONFIGURATION_TOKEN';\nexports.CONFIGURATION_LOADER = 'CONFIGURATION_LOADER';\nexports.VALIDATED_ENV_LOADER = 'VALIDATED_ENV_LOADER';\nexports.PARTIAL_CONFIGURATION_KEY = 'PARTIAL_CONFIGURATION_KEY';\nexports.PARTIAL_CONFIGURATION_PROPNAME = 'KEY';\nexports.VALIDATED_ENV_PROPNAME = '_PROCESS_ENV_VALIDATED';\nexports.AS_PROVIDER_METHOD_KEY = 'asProvider';\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar ConfigModule_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigModule = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst shared_utils_1 = require(\"@nestjs/common/utils/shared.utils\");\nconst dotenv = __importStar(require(\"dotenv\"));\nconst dotenv_expand_1 = require(\"dotenv-expand\");\nconst fs = __importStar(require(\"fs\"));\nconst path_1 = require(\"path\");\nconst config_host_module_1 = require(\"./config-host.module\");\nconst config_constants_1 = require(\"./config.constants\");\nconst config_service_1 = require(\"./config.service\");\nconst create_config_factory_util_1 = require(\"./utils/create-config-factory.util\");\nconst get_registration_token_util_1 = require(\"./utils/get-registration-token.util\");\nconst merge_configs_util_1 = require(\"./utils/merge-configs.util\");\nlet ConfigModule = ConfigModule_1 = class ConfigModule {\n    /**\n     * This promise resolves when \"dotenv\" completes loading environment variables.\n     * When \"ignoreEnvFile\" is set to true, then it will resolve immediately after the\n     * \"ConfigModule#forRoot\" method is called.\n     */\n    static get envVariablesLoaded() {\n        return this._envVariablesLoaded;\n    }\n    /**\n     * Loads process environment variables depending on the \"ignoreEnvFile\" flag and \"envFilePath\" value.\n     * Also, registers custom configurations globally.\n     * @param options\n     */\n    static forRoot(options = {}) {\n        let validatedEnvConfig = undefined;\n        let config = options.ignoreEnvFile ? {} : this.loadEnvFile(options);\n        if (!options.ignoreEnvVars) {\n            config = Object.assign(Object.assign({}, config), process.env);\n        }\n        if (options.validate) {\n            const validatedConfig = options.validate(config);\n            validatedEnvConfig = validatedConfig;\n            this.assignVariablesToProcess(validatedConfig);\n        }\n        else if (options.validationSchema) {\n            const validationOptions = this.getSchemaValidationOptions(options);\n            const { error, value: validatedConfig } = options.validationSchema.validate(config, validationOptions);\n            if (error) {\n                throw new Error(`Config validation error: ${error.message}`);\n            }\n            validatedEnvConfig = validatedConfig;\n            this.assignVariablesToProcess(validatedConfig);\n        }\n        else {\n            this.assignVariablesToProcess(config);\n        }\n        const isConfigToLoad = options.load && options.load.length;\n        const providers = (options.load || [])\n            .map(factory => (0, create_config_factory_util_1.createConfigProvider)(factory))\n            .filter(item => item);\n        const configProviderTokens = providers.map(item => item.provide);\n        const configServiceProvider = {\n            provide: config_service_1.ConfigService,\n            useFactory: (configService) => {\n                if (options.cache) {\n                    configService.isCacheEnabled = true;\n                }\n                return configService;\n            },\n            inject: [config_constants_1.CONFIGURATION_SERVICE_TOKEN, ...configProviderTokens],\n        };\n        providers.push(configServiceProvider);\n        if (validatedEnvConfig) {\n            const validatedEnvConfigLoader = {\n                provide: config_constants_1.VALIDATED_ENV_LOADER,\n                useFactory: (host) => {\n                    host[config_constants_1.VALIDATED_ENV_PROPNAME] = validatedEnvConfig;\n                },\n                inject: [config_constants_1.CONFIGURATION_TOKEN],\n            };\n            providers.push(validatedEnvConfigLoader);\n        }\n        this.environmentVariablesLoadedSignal();\n        return {\n            module: ConfigModule_1,\n            global: options.isGlobal,\n            providers: isConfigToLoad\n                ? [\n                    ...providers,\n                    {\n                        provide: config_constants_1.CONFIGURATION_LOADER,\n                        useFactory: (host, ...configurations) => {\n                            configurations.forEach((item, index) => this.mergePartial(host, item, providers[index]));\n                        },\n                        inject: [config_constants_1.CONFIGURATION_TOKEN, ...configProviderTokens],\n                    },\n                ]\n                : providers,\n            exports: [config_service_1.ConfigService, ...configProviderTokens],\n        };\n    }\n    /**\n     * Registers configuration object (partial registration).\n     * @param config\n     */\n    static forFeature(config) {\n        const configProvider = (0, create_config_factory_util_1.createConfigProvider)(config);\n        const serviceProvider = {\n            provide: config_service_1.ConfigService,\n            useFactory: (configService) => configService,\n            inject: [config_constants_1.CONFIGURATION_SERVICE_TOKEN, configProvider.provide],\n        };\n        return {\n            module: ConfigModule_1,\n            providers: [\n                configProvider,\n                serviceProvider,\n                {\n                    provide: config_constants_1.CONFIGURATION_LOADER,\n                    useFactory: (host, partialConfig) => {\n                        this.mergePartial(host, partialConfig, configProvider);\n                    },\n                    inject: [config_constants_1.CONFIGURATION_TOKEN, configProvider.provide],\n                },\n            ],\n            exports: [config_service_1.ConfigService, configProvider.provide],\n        };\n    }\n    static loadEnvFile(options) {\n        const envFilePaths = Array.isArray(options.envFilePath)\n            ? options.envFilePath\n            : [options.envFilePath || (0, path_1.resolve)(process.cwd(), '.env')];\n        let config = {};\n        for (const envFilePath of envFilePaths) {\n            if (fs.existsSync(envFilePath)) {\n                config = Object.assign(dotenv.parse(fs.readFileSync(envFilePath)), config);\n                if (options.expandVariables) {\n                    const expandOptions = typeof options.expandVariables === 'object' ? options.expandVariables : {};\n                    config = (0, dotenv_expand_1.expand)(Object.assign(Object.assign({}, expandOptions), { parsed: config })).parsed || config;\n                }\n            }\n        }\n        return config;\n    }\n    static assignVariablesToProcess(config) {\n        if (!(0, shared_utils_1.isObject)(config)) {\n            return;\n        }\n        const keys = Object.keys(config).filter(key => !(key in process.env));\n        keys.forEach(key => (process.env[key] = config[key]));\n    }\n    static mergePartial(host, item, provider) {\n        const factoryRef = provider.useFactory;\n        const token = (0, get_registration_token_util_1.getRegistrationToken)(factoryRef);\n        (0, merge_configs_util_1.mergeConfigObject)(host, item, token);\n    }\n    static getSchemaValidationOptions(options) {\n        if (options.validationOptions) {\n            if (typeof options.validationOptions.allowUnknown === 'undefined') {\n                options.validationOptions.allowUnknown = true;\n            }\n            return options.validationOptions;\n        }\n        return {\n            abortEarly: false,\n            allowUnknown: true,\n        };\n    }\n};\nConfigModule._envVariablesLoaded = new Promise(resolve => (ConfigModule_1.environmentVariablesLoadedSignal = resolve));\nConfigModule = ConfigModule_1 = __decorate([\n    (0, common_1.Module)({\n        imports: [config_host_module_1.ConfigHostModule],\n        providers: [\n            {\n                provide: config_service_1.ConfigService,\n                useExisting: config_constants_1.CONFIGURATION_SERVICE_TOKEN,\n            },\n        ],\n        exports: [config_host_module_1.ConfigHostModule, config_service_1.ConfigService],\n    })\n], ConfigModule);\nexports.ConfigModule = ConfigModule;\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigService = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst shared_utils_1 = require(\"@nestjs/common/utils/shared.utils\");\nconst lodash_1 = require(\"lodash\");\nconst config_constants_1 = require(\"./config.constants\");\nlet ConfigService = class ConfigService {\n    constructor(internalConfig = {}) {\n        this.internalConfig = internalConfig;\n        this.cache = {};\n        this._isCacheEnabled = false;\n    }\n    set isCacheEnabled(value) {\n        this._isCacheEnabled = value;\n    }\n    get isCacheEnabled() {\n        return this._isCacheEnabled;\n    }\n    /**\n     * Get a configuration value (either custom configuration or process environment variable)\n     * based on property path (you can use dot notation to traverse nested object, e.g. \"database.host\").\n     * It returns a default value if the key does not exist.\n     * @param propertyPath\n     * @param defaultValueOrOptions\n     */\n    get(propertyPath, defaultValueOrOptions, options) {\n        const validatedEnvValue = this.getFromValidatedEnv(propertyPath);\n        if (!(0, shared_utils_1.isUndefined)(validatedEnvValue)) {\n            return validatedEnvValue;\n        }\n        const defaultValue = this.isGetOptionsObject(defaultValueOrOptions) && !options\n            ? undefined\n            : defaultValueOrOptions;\n        const processEnvValue = this.getFromProcessEnv(propertyPath, defaultValue);\n        if (!(0, shared_utils_1.isUndefined)(processEnvValue)) {\n            return processEnvValue;\n        }\n        const internalValue = this.getFromInternalConfig(propertyPath);\n        if (!(0, shared_utils_1.isUndefined)(internalValue)) {\n            return internalValue;\n        }\n        return defaultValue;\n    }\n    /**\n     * Get a configuration value (either custom configuration or process environment variable)\n     * based on property path (you can use dot notation to traverse nested object, e.g. \"database.host\").\n     * It returns a default value if the key does not exist.\n     * If the default value is undefined an exception will be thrown.\n     * @param propertyPath\n     * @param defaultValueOrOptions\n     */\n    getOrThrow(propertyPath, defaultValueOrOptions, options) {\n        // @ts-expect-error Bypass method overloads\n        const value = this.get(propertyPath, defaultValueOrOptions, options);\n        if ((0, shared_utils_1.isUndefined)(value)) {\n            throw new TypeError(`Configuration key \"${propertyPath.toString()}\" does not exist`);\n        }\n        return value;\n    }\n    getFromCache(propertyPath, defaultValue) {\n        const cachedValue = (0, lodash_1.get)(this.cache, propertyPath);\n        return (0, shared_utils_1.isUndefined)(cachedValue)\n            ? defaultValue\n            : cachedValue;\n    }\n    getFromValidatedEnv(propertyPath) {\n        const validatedEnvValue = (0, lodash_1.get)(this.internalConfig[config_constants_1.VALIDATED_ENV_PROPNAME], propertyPath);\n        return validatedEnvValue;\n    }\n    getFromProcessEnv(propertyPath, defaultValue) {\n        if (this.isCacheEnabled &&\n            (0, lodash_1.has)(this.cache, propertyPath)) {\n            const cachedValue = this.getFromCache(propertyPath, defaultValue);\n            return !(0, shared_utils_1.isUndefined)(cachedValue) ? cachedValue : defaultValue;\n        }\n        const processValue = (0, lodash_1.get)(process.env, propertyPath);\n        this.setInCacheIfDefined(propertyPath, processValue);\n        return processValue;\n    }\n    getFromInternalConfig(propertyPath) {\n        const internalValue = (0, lodash_1.get)(this.internalConfig, propertyPath);\n        return internalValue;\n    }\n    setInCacheIfDefined(propertyPath, value) {\n        if (typeof value === 'undefined') {\n            return;\n        }\n        (0, lodash_1.set)(this.cache, propertyPath, value);\n    }\n    isGetOptionsObject(options) {\n        return options && (options === null || options === void 0 ? void 0 : options.infer) && Object.keys(options).length === 1;\n    }\n};\nConfigService = __decorate([\n    (0, common_1.Injectable)(),\n    __param(0, (0, common_1.Optional)()),\n    __param(0, (0, common_1.Inject)(config_constants_1.CONFIGURATION_TOKEN)),\n    __metadata(\"design:paramtypes\", [Object])\n], ConfigService);\nexports.ConfigService = ConfigService;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./config.module\"), exports);\n__exportStar(require(\"./config.service\"), exports);\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./utils\"), exports);\n__exportStar(require(\"./interfaces\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./config-factory.interface\"), exports);\n__exportStar(require(\"./config-module-options.interface\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./config-object.type\"), exports);\n__exportStar(require(\"./config.type\"), exports);\n__exportStar(require(\"./no-infer.type\"), exports);\n__exportStar(require(\"./path-value.type\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConfigProvider = void 0;\nconst uuid_1 = require(\"uuid\");\nconst get_config_token_util_1 = require(\"./get-config-token.util\");\nfunction createConfigProvider(factory) {\n    return {\n        provide: factory.KEY || (0, get_config_token_util_1.getConfigToken)((0, uuid_1.v4)()),\n        useFactory: factory,\n        inject: [],\n    };\n}\nexports.createConfigProvider = createConfigProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getConfigToken = void 0;\nfunction getConfigToken(token) {\n    return `CONFIGURATION(${token})`;\n}\nexports.getConfigToken = getConfigToken;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRegistrationToken = void 0;\nconst config_constants_1 = require(\"../config.constants\");\nfunction getRegistrationToken(config) {\n    return config[config_constants_1.PARTIAL_CONFIGURATION_KEY];\n}\nexports.getRegistrationToken = getRegistrationToken;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./register-as.util\"), exports);\n__exportStar(require(\"./get-config-token.util\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mergeConfigObject = void 0;\nconst lodash_1 = require(\"lodash\");\nfunction mergeConfigObject(host, partial, token) {\n    if (token) {\n        (0, lodash_1.set)(host, token, partial);\n        return partial;\n    }\n    Object.assign(host, partial);\n}\nexports.mergeConfigObject = mergeConfigObject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.registerAs = void 0;\nconst __1 = require(\"..\");\nconst config_constants_1 = require(\"../config.constants\");\nconst get_config_token_util_1 = require(\"./get-config-token.util\");\n/**\n * Registers the configuration object behind a specified token.\n */\nfunction registerAs(token, configFactory) {\n    const defineProperty = (key, value) => {\n        Object.defineProperty(configFactory, key, {\n            configurable: false,\n            enumerable: false,\n            value,\n            writable: false,\n        });\n    };\n    defineProperty(config_constants_1.PARTIAL_CONFIGURATION_KEY, token);\n    defineProperty(config_constants_1.PARTIAL_CONFIGURATION_PROPNAME, (0, get_config_token_util_1.getConfigToken)(token));\n    defineProperty(config_constants_1.AS_PROVIDER_METHOD_KEY, () => ({\n        imports: [__1.ConfigModule.forFeature(configFactory)],\n        useFactory: (config) => config,\n        inject: [(0, get_config_token_util_1.getConfigToken)(token)],\n    }));\n    return configFactory;\n}\nexports.registerAs = registerAs;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nexports.__esModule = true;\n__export(require(\"./dist\"));\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigHostModule = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst config_constants_1 = require(\"./config.constants\");\nconst config_service_1 = require(\"./config.service\");\nlet ConfigHostModule = class ConfigHostModule {\n};\nConfigHostModule = __decorate([\n    (0, common_1.Global)(),\n    (0, common_1.Module)({\n        providers: [\n            {\n                provide: config_constants_1.CONFIGURATION_TOKEN,\n                useFactory: () => ({}),\n            },\n            {\n                provide: config_constants_1.CONFIGURATION_SERVICE_TOKEN,\n                useClass: config_service_1.ConfigService,\n            },\n        ],\n        exports: [config_constants_1.CONFIGURATION_TOKEN, config_constants_1.CONFIGURATION_SERVICE_TOKEN],\n    })\n], ConfigHostModule);\nexports.ConfigHostModule = ConfigHostModule;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AS_PROVIDER_METHOD_KEY = exports.VALIDATED_ENV_PROPNAME = exports.PARTIAL_CONFIGURATION_PROPNAME = exports.PARTIAL_CONFIGURATION_KEY = exports.VALIDATED_ENV_LOADER = exports.CONFIGURATION_LOADER = exports.CONFIGURATION_TOKEN = exports.CONFIGURATION_SERVICE_TOKEN = void 0;\n/**\n * Injection tokens\n */\nexports.CONFIGURATION_SERVICE_TOKEN = Symbol('CONFIG_SERVICE');\nexports.CONFIGURATION_TOKEN = 'CONFIGURATION_TOKEN';\nexports.CONFIGURATION_LOADER = 'CONFIGURATION_LOADER';\nexports.VALIDATED_ENV_LOADER = 'VALIDATED_ENV_LOADER';\nexports.PARTIAL_CONFIGURATION_KEY = 'PARTIAL_CONFIGURATION_KEY';\nexports.PARTIAL_CONFIGURATION_PROPNAME = 'KEY';\nexports.VALIDATED_ENV_PROPNAME = '_PROCESS_ENV_VALIDATED';\nexports.AS_PROVIDER_METHOD_KEY = 'asProvider';\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar ConfigModule_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigModule = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst shared_utils_1 = require(\"@nestjs/common/utils/shared.utils\");\nconst dotenv = __importStar(require(\"dotenv\"));\nconst dotenv_expand_1 = require(\"dotenv-expand\");\nconst fs = __importStar(require(\"fs\"));\nconst path_1 = require(\"path\");\nconst config_host_module_1 = require(\"./config-host.module\");\nconst config_constants_1 = require(\"./config.constants\");\nconst config_service_1 = require(\"./config.service\");\nconst create_config_factory_util_1 = require(\"./utils/create-config-factory.util\");\nconst get_registration_token_util_1 = require(\"./utils/get-registration-token.util\");\nconst merge_configs_util_1 = require(\"./utils/merge-configs.util\");\nlet ConfigModule = ConfigModule_1 = class ConfigModule {\n    /**\n     * This promise resolves when \"dotenv\" completes loading environment variables.\n     * When \"ignoreEnvFile\" is set to true, then it will resolve immediately after the\n     * \"ConfigModule#forRoot\" method is called.\n     */\n    static get envVariablesLoaded() {\n        return this._envVariablesLoaded;\n    }\n    /**\n     * Loads process environment variables depending on the \"ignoreEnvFile\" flag and \"envFilePath\" value.\n     * Also, registers custom configurations globally.\n     * @param options\n     */\n    static forRoot(options = {}) {\n        let validatedEnvConfig = undefined;\n        let config = options.ignoreEnvFile ? {} : this.loadEnvFile(options);\n        if (!options.ignoreEnvVars) {\n            config = Object.assign(Object.assign({}, config), process.env);\n        }\n        if (options.validate) {\n            const validatedConfig = options.validate(config);\n            validatedEnvConfig = validatedConfig;\n            this.assignVariablesToProcess(validatedConfig);\n        }\n        else if (options.validationSchema) {\n            const validationOptions = this.getSchemaValidationOptions(options);\n            const { error, value: validatedConfig } = options.validationSchema.validate(config, validationOptions);\n            if (error) {\n                throw new Error(`Config validation error: ${error.message}`);\n            }\n            validatedEnvConfig = validatedConfig;\n            this.assignVariablesToProcess(validatedConfig);\n        }\n        else {\n            this.assignVariablesToProcess(config);\n        }\n        const isConfigToLoad = options.load && options.load.length;\n        const providers = (options.load || [])\n            .map(factory => (0, create_config_factory_util_1.createConfigProvider)(factory))\n            .filter(item => item);\n        const configProviderTokens = providers.map(item => item.provide);\n        const configServiceProvider = {\n            provide: config_service_1.ConfigService,\n            useFactory: (configService) => {\n                if (options.cache) {\n                    configService.isCacheEnabled = true;\n                }\n                return configService;\n            },\n            inject: [config_constants_1.CONFIGURATION_SERVICE_TOKEN, ...configProviderTokens],\n        };\n        providers.push(configServiceProvider);\n        if (validatedEnvConfig) {\n            const validatedEnvConfigLoader = {\n                provide: config_constants_1.VALIDATED_ENV_LOADER,\n                useFactory: (host) => {\n                    host[config_constants_1.VALIDATED_ENV_PROPNAME] = validatedEnvConfig;\n                },\n                inject: [config_constants_1.CONFIGURATION_TOKEN],\n            };\n            providers.push(validatedEnvConfigLoader);\n        }\n        this.environmentVariablesLoadedSignal();\n        return {\n            module: ConfigModule_1,\n            global: options.isGlobal,\n            providers: isConfigToLoad\n                ? [\n                    ...providers,\n                    {\n                        provide: config_constants_1.CONFIGURATION_LOADER,\n                        useFactory: (host, ...configurations) => {\n                            configurations.forEach((item, index) => this.mergePartial(host, item, providers[index]));\n                        },\n                        inject: [config_constants_1.CONFIGURATION_TOKEN, ...configProviderTokens],\n                    },\n                ]\n                : providers,\n            exports: [config_service_1.ConfigService, ...configProviderTokens],\n        };\n    }\n    /**\n     * Registers configuration object (partial registration).\n     * @param config\n     */\n    static forFeature(config) {\n        const configProvider = (0, create_config_factory_util_1.createConfigProvider)(config);\n        const serviceProvider = {\n            provide: config_service_1.ConfigService,\n            useFactory: (configService) => configService,\n            inject: [config_constants_1.CONFIGURATION_SERVICE_TOKEN, configProvider.provide],\n        };\n        return {\n            module: ConfigModule_1,\n            providers: [\n                configProvider,\n                serviceProvider,\n                {\n                    provide: config_constants_1.CONFIGURATION_LOADER,\n                    useFactory: (host, partialConfig) => {\n                        this.mergePartial(host, partialConfig, configProvider);\n                    },\n                    inject: [config_constants_1.CONFIGURATION_TOKEN, configProvider.provide],\n                },\n            ],\n            exports: [config_service_1.ConfigService, configProvider.provide],\n        };\n    }\n    static loadEnvFile(options) {\n        const envFilePaths = Array.isArray(options.envFilePath)\n            ? options.envFilePath\n            : [options.envFilePath || (0, path_1.resolve)(process.cwd(), '.env')];\n        let config = {};\n        for (const envFilePath of envFilePaths) {\n            if (fs.existsSync(envFilePath)) {\n                config = Object.assign(dotenv.parse(fs.readFileSync(envFilePath)), config);\n                if (options.expandVariables) {\n                    const expandOptions = typeof options.expandVariables === 'object' ? options.expandVariables : {};\n                    config = (0, dotenv_expand_1.expand)(Object.assign(Object.assign({}, expandOptions), { parsed: config })).parsed || config;\n                }\n            }\n        }\n        return config;\n    }\n    static assignVariablesToProcess(config) {\n        if (!(0, shared_utils_1.isObject)(config)) {\n            return;\n        }\n        const keys = Object.keys(config).filter(key => !(key in process.env));\n        keys.forEach(key => (process.env[key] = config[key]));\n    }\n    static mergePartial(host, item, provider) {\n        const factoryRef = provider.useFactory;\n        const token = (0, get_registration_token_util_1.getRegistrationToken)(factoryRef);\n        (0, merge_configs_util_1.mergeConfigObject)(host, item, token);\n    }\n    static getSchemaValidationOptions(options) {\n        if (options.validationOptions) {\n            if (typeof options.validationOptions.allowUnknown === 'undefined') {\n                options.validationOptions.allowUnknown = true;\n            }\n            return options.validationOptions;\n        }\n        return {\n            abortEarly: false,\n            allowUnknown: true,\n        };\n    }\n};\nConfigModule._envVariablesLoaded = new Promise(resolve => (ConfigModule_1.environmentVariablesLoadedSignal = resolve));\nConfigModule = ConfigModule_1 = __decorate([\n    (0, common_1.Module)({\n        imports: [config_host_module_1.ConfigHostModule],\n        providers: [\n            {\n                provide: config_service_1.ConfigService,\n                useExisting: config_constants_1.CONFIGURATION_SERVICE_TOKEN,\n            },\n        ],\n        exports: [config_host_module_1.ConfigHostModule, config_service_1.ConfigService],\n    })\n], ConfigModule);\nexports.ConfigModule = ConfigModule;\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigService = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst shared_utils_1 = require(\"@nestjs/common/utils/shared.utils\");\nconst lodash_1 = require(\"lodash\");\nconst config_constants_1 = require(\"./config.constants\");\nlet ConfigService = class ConfigService {\n    constructor(internalConfig = {}) {\n        this.internalConfig = internalConfig;\n        this.cache = {};\n        this._isCacheEnabled = false;\n    }\n    set isCacheEnabled(value) {\n        this._isCacheEnabled = value;\n    }\n    get isCacheEnabled() {\n        return this._isCacheEnabled;\n    }\n    /**\n     * Get a configuration value (either custom configuration or process environment variable)\n     * based on property path (you can use dot notation to traverse nested object, e.g. \"database.host\").\n     * It returns a default value if the key does not exist.\n     * @param propertyPath\n     * @param defaultValueOrOptions\n     */\n    get(propertyPath, defaultValueOrOptions, options) {\n        const validatedEnvValue = this.getFromValidatedEnv(propertyPath);\n        if (!(0, shared_utils_1.isUndefined)(validatedEnvValue)) {\n            return validatedEnvValue;\n        }\n        const defaultValue = this.isGetOptionsObject(defaultValueOrOptions) && !options\n            ? undefined\n            : defaultValueOrOptions;\n        const processEnvValue = this.getFromProcessEnv(propertyPath, defaultValue);\n        if (!(0, shared_utils_1.isUndefined)(processEnvValue)) {\n            return processEnvValue;\n        }\n        const internalValue = this.getFromInternalConfig(propertyPath);\n        if (!(0, shared_utils_1.isUndefined)(internalValue)) {\n            return internalValue;\n        }\n        return defaultValue;\n    }\n    /**\n     * Get a configuration value (either custom configuration or process environment variable)\n     * based on property path (you can use dot notation to traverse nested object, e.g. \"database.host\").\n     * It returns a default value if the key does not exist.\n     * If the default value is undefined an exception will be thrown.\n     * @param propertyPath\n     * @param defaultValueOrOptions\n     */\n    getOrThrow(propertyPath, defaultValueOrOptions, options) {\n        // @ts-expect-error Bypass method overloads\n        const value = this.get(propertyPath, defaultValueOrOptions, options);\n        if ((0, shared_utils_1.isUndefined)(value)) {\n            throw new TypeError(`Configuration key \"${propertyPath.toString()}\" does not exist`);\n        }\n        return value;\n    }\n    getFromCache(propertyPath, defaultValue) {\n        const cachedValue = (0, lodash_1.get)(this.cache, propertyPath);\n        return (0, shared_utils_1.isUndefined)(cachedValue)\n            ? defaultValue\n            : cachedValue;\n    }\n    getFromValidatedEnv(propertyPath) {\n        const validatedEnvValue = (0, lodash_1.get)(this.internalConfig[config_constants_1.VALIDATED_ENV_PROPNAME], propertyPath);\n        return validatedEnvValue;\n    }\n    getFromProcessEnv(propertyPath, defaultValue) {\n        if (this.isCacheEnabled &&\n            (0, lodash_1.has)(this.cache, propertyPath)) {\n            const cachedValue = this.getFromCache(propertyPath, defaultValue);\n            return !(0, shared_utils_1.isUndefined)(cachedValue) ? cachedValue : defaultValue;\n        }\n        const processValue = (0, lodash_1.get)(process.env, propertyPath);\n        this.setInCacheIfDefined(propertyPath, processValue);\n        return processValue;\n    }\n    getFromInternalConfig(propertyPath) {\n        const internalValue = (0, lodash_1.get)(this.internalConfig, propertyPath);\n        return internalValue;\n    }\n    setInCacheIfDefined(propertyPath, value) {\n        if (typeof value === 'undefined') {\n            return;\n        }\n        (0, lodash_1.set)(this.cache, propertyPath, value);\n    }\n    isGetOptionsObject(options) {\n        return options && (options === null || options === void 0 ? void 0 : options.infer) && Object.keys(options).length === 1;\n    }\n};\nConfigService = __decorate([\n    (0, common_1.Injectable)(),\n    __param(0, (0, common_1.Optional)()),\n    __param(0, (0, common_1.Inject)(config_constants_1.CONFIGURATION_TOKEN)),\n    __metadata(\"design:paramtypes\", [Object])\n], ConfigService);\nexports.ConfigService = ConfigService;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./config.module\"), exports);\n__exportStar(require(\"./config.service\"), exports);\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./utils\"), exports);\n__exportStar(require(\"./interfaces\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./config-factory.interface\"), exports);\n__exportStar(require(\"./config-module-options.interface\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./config-object.type\"), exports);\n__exportStar(require(\"./config.type\"), exports);\n__exportStar(require(\"./no-infer.type\"), exports);\n__exportStar(require(\"./path-value.type\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConfigProvider = void 0;\nconst uuid_1 = require(\"uuid\");\nconst get_config_token_util_1 = require(\"./get-config-token.util\");\nfunction createConfigProvider(factory) {\n    return {\n        provide: factory.KEY || (0, get_config_token_util_1.getConfigToken)((0, uuid_1.v4)()),\n        useFactory: factory,\n        inject: [],\n    };\n}\nexports.createConfigProvider = createConfigProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getConfigToken = void 0;\nfunction getConfigToken(token) {\n    return `CONFIGURATION(${token})`;\n}\nexports.getConfigToken = getConfigToken;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRegistrationToken = void 0;\nconst config_constants_1 = require(\"../config.constants\");\nfunction getRegistrationToken(config) {\n    return config[config_constants_1.PARTIAL_CONFIGURATION_KEY];\n}\nexports.getRegistrationToken = getRegistrationToken;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./register-as.util\"), exports);\n__exportStar(require(\"./get-config-token.util\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mergeConfigObject = void 0;\nconst lodash_1 = require(\"lodash\");\nfunction mergeConfigObject(host, partial, token) {\n    if (token) {\n        (0, lodash_1.set)(host, token, partial);\n        return partial;\n    }\n    Object.assign(host, partial);\n}\nexports.mergeConfigObject = mergeConfigObject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.registerAs = void 0;\nconst __1 = require(\"..\");\nconst config_constants_1 = require(\"../config.constants\");\nconst get_config_token_util_1 = require(\"./get-config-token.util\");\n/**\n * Registers the configuration object behind a specified token.\n */\nfunction registerAs(token, configFactory) {\n    const defineProperty = (key, value) => {\n        Object.defineProperty(configFactory, key, {\n            configurable: false,\n            enumerable: false,\n            value,\n            writable: false,\n        });\n    };\n    defineProperty(config_constants_1.PARTIAL_CONFIGURATION_KEY, token);\n    defineProperty(config_constants_1.PARTIAL_CONFIGURATION_PROPNAME, (0, get_config_token_util_1.getConfigToken)(token));\n    defineProperty(config_constants_1.AS_PROVIDER_METHOD_KEY, () => ({\n        imports: [__1.ConfigModule.forFeature(configFactory)],\n        useFactory: (config) => config,\n        inject: [(0, get_config_token_util_1.getConfigToken)(token)],\n    }));\n    return configFactory;\n}\nexports.registerAs = registerAs;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nexports.__esModule = true;\n__export(require(\"./dist\"));\n","import { MiddlewareConsumer, Module } from '@nestjs/common';\nimport { ConfigModule, ConfigService } from '@nestjs/config';\nimport { EventEmitterModule } from '@nestjs/event-emitter';\nimport { ControllersModule } from './controllers/controllers.module';\nimport { LoggerMiddleware } from './core/logging/logger.middleware';\nimport { DatabaseModule } from '@boilerplate/data';\nimport { ServicesModule } from './services/services.module';\nimport { SocketModule } from './socket/socket.module';\nimport { ServeStaticModule } from '@nestjs/serve-static';\nimport * as path from 'path';\nimport { IApiConfigParams } from './interfaces/api-config-params';\n\nconst serveStatic = process.env.NX_SERVE_STATIC === 'true';\n\n@Module({\n  imports: [\n    ConfigModule.forRoot(),\n\tServeStaticModule.forRoot({\n\t\trootPath: serveStatic ? path.resolve(process.env.NX_SERVE_STATIC_PATH || 'client') : null,\n\t}),\n\tDatabaseModule.forRootAsync({\n\t\timports: [ConfigModule],\n\t\tuseFactory: (configService: ConfigService<IApiConfigParams>) => ({\n\t\t\ttype: 'postgres',\n\t\t\thost: configService.get('NX_DATABASE_HOST'),\n\t\t\tport: +configService.get('NX_DATABASE_PORT'),\n\t\t\tusername: configService.get('NX_DATABASE_USERNAME'),\n\t\t\tpassword: configService.get('NX_DATABASE_PASSWORD'),\n\t\t\tdatabase: configService.get('NX_DATABASE_NAME'),\n            logging: configService.get('NX_DATABASE_ENABLE_LOGGING') === 'true',\n\t\t}),\n\t\tinject: [ConfigService]\n\t}),\n    ServicesModule,\n\tSocketModule,\n    ControllersModule,\n\tEventEmitterModule.forRoot()\n  ]\n})\nexport class AppModule {\n  public configure(consumer: MiddlewareConsumer): void {\n    consumer.apply(LoggerMiddleware)\n        .forRoutes('*');\n  }\n}\n","export const jwtConstants = {\n\tsecret: 'secretKey',\n\texpiresIn: '24h'\n};\n","import {\n  Body,\n  Controller,\n  Delete,\n  Get,\n  Query,\n  UseGuards,\n  Param,\n  Patch,\n  Post\n} from '@nestjs/common';\nimport { \n  ListWithTotals, \n  ChannelDto, \n  ChannelFilter, \n  StreamPlaybackDto\n} from '@boilerplate/shared';\nimport { JwtAuthGuard } from '../services/guard/jwt.guard';\nimport { ChannelsService } from '../services/channels.service';\n\n\n@Controller('channels')\n@UseGuards(JwtAuthGuard)\nexport class ChannelsController {\n  constructor(\n    private readonly channelsService: ChannelsService\n  ) {}\n\n  @Get()\n  public async findAll(\n    @Query() filter: ChannelFilter\n  ): Promise<ListWithTotals<ChannelDto>> {\n    return await this.channelsService.findAll(filter);\n  }\n\n  @Get(':id')\n\tpublic async findOne(@Param('id') id: string): Promise<ChannelDto> {\n\t\treturn await this.channelsService.getById(id);\n\t}\n\n  @Get(':id/live_stream')\n\tpublic async getStreamPlayback(@Param('id') id: string): Promise<StreamPlaybackDto> {\n\t\treturn await this.channelsService.getStreamPlayback(id);\n\t}\n\n  @Post()\n  public async createChannel(@Body() body: { name: string }): Promise<ChannelDto> {\n\t  return await this.channelsService.createChannel(body.name);\n  }\n\n  @Patch(':id')\n\tpublic async updateChannel(@Body() dto: ChannelDto): Promise<void> {\n    await this.channelsService.updateChannel(dto);\n\t}\n\n  @Delete(':id')\n  public async deleteChannel(@Param('id') id: string): Promise<void> {\n\t  await this.channelsService.deleteChannel(id);\n  }\n}\n","import { Module } from '@nestjs/common';\nimport { TerminusModule } from '@nestjs/terminus';\nimport { UsersController } from './users.controller';\nimport { HealthController } from './health.controller';\nimport { ChannelsController } from './channels.controller';\nimport { WidgetsController } from './widgets.controller';\nimport { ServicesModule } from '../services/services.module';\n\n\n@Module({\n  imports: [\n    TerminusModule,\n    ServicesModule,\n  ],\n  controllers: [\n    UsersController,\n    ChannelsController,\n\t\tWidgetsController,\n    HealthController\n  ],\n})\nexport class ControllersModule {}\n","import { Controller, Get } from '@nestjs/common';\nimport {\n  HealthCheck,\n  HealthCheckResult,\n  HealthCheckService,\n  TypeOrmHealthIndicator\n} from '@nestjs/terminus';\nimport { Connection } from 'typeorm';\n\n@Controller('health')\nexport class HealthController {\n  constructor(\n      private readonly connection: Connection,\n      private readonly healthCheckService: HealthCheckService,\n      private readonly typeOrmHealthIndicator: TypeOrmHealthIndicator\n  ) {}\n\n  @Get()\n  @HealthCheck()\n  public async check(): Promise<HealthCheckResult> {\n    return await this.healthCheckService.check([\n      async () => this.typeOrmHealthIndicator.pingCheck('database', { timeout: 1500, connection: this.connection })\n    ]);\n  }\n}\n","import { \n  Body, \n  Controller, \n  Get, \n  Query, \n  UseGuards, \n  Res, \n  Req, \n  Post \n} from '@nestjs/common';\nimport { Request, Response } from 'express';\nimport { AuthGuard } from '@nestjs/passport';\nimport { UserCreationDto, UserDto, UserFilter } from '@boilerplate/shared';\nimport { UsersService } from '../services/users.service';\nimport { AuthService } from '../services/auth.service';\n\n\n@Controller('users')\nexport class UsersController {\n  constructor(\n    private readonly usersService: UsersService,\n    private readonly authService: AuthService\n  ) {}\n\n  @Get()\n  public async findAll(@Query() filter: UserFilter): Promise<UserDto[]> {\n  \treturn await this.usersService.findAll(filter);\n  }\n\n  // @Put()\n  // public async create(@Body() entity: UserDto): Promise<UserDto> {\n  //   return this.usersService.upsert(entity);\n  // }\n\n\t@UseGuards(AuthGuard('local'))\n\t@Post('/login')\n\tpublic async login(@Res({ passthrough: true }) res: Response, @Req() req: Request): Promise<string> {\n  \tconst user = req.user as UserDto;\n\n\t\tconst accessToken = this.authService.generateJWT(user);\n\n    return JSON.stringify(accessToken);\n\t}\n\n  @Post('/signup')\n\tpublic async registration(@Body() newUserDto: UserCreationDto) {    \n    const newUser = <UserCreationDto>await this.authService.registrateUser(newUserDto);\n\n\t\tconst accessToken = this.authService.generateJWT(newUser as UserDto);\n\n\t\treturn JSON.stringify(accessToken);\n\t}\n}\n","import {\n  Body,\n  Controller,\n  Delete,\n  Get,\n  Query,\n  UseGuards,\n  Param,\n  Patch,\n  Post\n} from '@nestjs/common';\nimport { \n  ListWithTotals, \n  WidgetDto, \n  WidgetFilter \n} from '@boilerplate/shared';\nimport { JwtAuthGuard } from '../services/guard/jwt.guard';\nimport { WidgetsService } from '../services/widgets.service';\n\n\n@Controller('widgets')\n@UseGuards(JwtAuthGuard)\nexport class WidgetsController {\n  constructor(\n\t  private readonly widgetsService: WidgetsService\n  ) {}\n\n  @Get(':id')\n  public async findAll(\n    @Param('id') widgetId: string, \n    @Query() filter: WidgetFilter\n  ): Promise<ListWithTotals<WidgetDto>> {\n\t  return await this.widgetsService.findAll(widgetId, filter);\n  }\n\n  @Post()\n  public async createWidget(@Body() body: WidgetDto): Promise<WidgetDto> {\n\t  return await this.widgetsService.createWidget(body);\n  }\n\n  @Patch(':id')\n\tpublic async updateWidget(@Body() dto: WidgetDto): Promise<void> {\n    await this.widgetsService.updateWidget(dto);\n\t}\n\n  @Delete(':id')\n  public async deleteWidget(\n    @Body() body: { channelId: string, widgetId: string }\n  ): Promise<void> {\n\t  const { channelId, widgetId } = body;\n\n\t  await this.widgetsService.deleteWidget({ channelId, widgetId });\n  }\n}\n","import { Injectable, NestMiddleware, Logger } from '@nestjs/common';\n\nimport { Request, Response, NextFunction } from 'express';\nimport { ConfigService } from '@nestjs/config';\nimport { UserDto } from '@boilerplate/shared';\nimport { IApiConfigParams } from '../../interfaces/api-config-params';\n\n@Injectable()\nexport class LoggerMiddleware implements NestMiddleware {\n  private readonly logger = new Logger('HTTP');\n  private readonly isResponseBodyLoggingEnabled: boolean;\n  private readonly isVerboseRequestsLoggingEnabled: boolean;\n\n\tconstructor(private readonly configService: ConfigService<IApiConfigParams>) {\n    this.isResponseBodyLoggingEnabled = this.configService.get('NX_ENABLE_RESPONSE_BODY_LOGGING') === 'true';\n    this.isVerboseRequestsLoggingEnabled = this.configService.get('NX_ENABLE_VERBOSE_REQUESTS_LOGGING') === 'true';\n  }\n\n\tpublic use(request: Request, response: Response, next: NextFunction): void {\n\t\tconst { ip, method, body, query } = request;\n\t\tconst userAgent = request.get('user-agent') || '';\n\n    if (this.isResponseBodyLoggingEnabled) {\n      const oldJsonFunc = response.json;\n      response.json = (body) => {\n        response.locals._jsonBody = body;\n\n        return oldJsonFunc.call(response, body);\n      };\n    }\n\n\t\tresponse.on('close', () => {\n\t\t\tconst { statusCode, locals } = response;\n\t\t\tconst contentLength = response.get('content-length');\n\n      const url = request.url;\n      const path = request.route?.path;\n\n\t\t\tif (!url.includes('/users')) {\n\t\t\t\tif (this.isVerboseRequestsLoggingEnabled) {\n\t\t\t\t\tthis.logger.log({\n\t\t\t\t\t\tmethod,\n\t\t\t\t\t\turl,\n            path,\n\t\t\t\t\t\tstatusCode,\n\t\t\t\t\t\tbody,\n\t\t\t\t\t\tip,\n            query,\n\t\t\t\t\t\tcontentLength: contentLength || 0,\n\t\t\t\t\t\tuserAgent,\n            currentUserId: (request.user as UserDto)?.id,\n            responseJsonBody: locals._jsonBody\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.logger.log(`[${ip}] [${method}] ${url} - ${statusCode}`);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tnext();\n\t}\n}\n","import { Catch, HttpStatus } from '@nestjs/common';\nimport BaseAppExceptionsFilter from './base-app-exceptions.filter';\n\n@Catch()\nexport default class AllExceptionsFilter extends BaseAppExceptionsFilter {\n  protected defaultStatusCode = HttpStatus.INTERNAL_SERVER_ERROR;\n}\n","import { Catch, HttpStatus } from '@nestjs/common';\nimport BaseAppExceptionsFilter from './base-app-exceptions.filter';\nimport BadRequestDetailedException from '../exceptions/bad-request-detailed.exception';\n\n@Catch(BadRequestDetailedException)\nexport default class BadRequestExceptionsFilter extends BaseAppExceptionsFilter {\n  protected defaultStatusCode = HttpStatus.BAD_REQUEST;\n\n  protected getFieldsErrors(exception: Error): Record<string, string[]> {\n    if (exception instanceof BadRequestDetailedException)\n      return exception.fieldsErrors;\n    else\n      return undefined;\n  }\n}\n","import { ArgumentsHost, ExceptionFilter, HttpException, HttpStatus, Logger } from '@nestjs/common';\nimport { IErrorResponse } from '@boilerplate/shared';\n\nexport default abstract class BaseAppExceptionsFilter implements ExceptionFilter {\n  private static readonly logger = new Logger('ExceptionsHandler');\n\n  protected defaultErrorMessage? = 'Something went wrong';\n  protected defaultStatusCode = HttpStatus.INTERNAL_SERVER_ERROR;\n\n  public catch(exception: Error, host: ArgumentsHost): void {\n    const ctx = host.switchToHttp();\n    const response = ctx.getResponse();\n    const request = ctx.getRequest();\n\n    const statusCode = exception instanceof HttpException\n      ? exception.getStatus()\n      : this.defaultStatusCode;\n\n    let message: string;\n    let description: string;\n    let exceptionDetails: any;\n\n    if (exception instanceof HttpException) {\n      const errorResponse = exception.getResponse();\n      const messageFromResponse = errorResponse['message'];\n      description = errorResponse['error'];\n\n      if (messageFromResponse)\n        message = messageFromResponse;\n      else\n        exceptionDetails = errorResponse;\n    } else {\n      message = typeof exception === 'string' ? exception : exception.message;\n\n      BaseAppExceptionsFilter.logger.error(exception);\n    }\n\n    const responseBody: IErrorResponse = {\n      statusCode,\n      timestamp: new Date().toISOString(),\n      message: message || this.defaultErrorMessage,\n      description,\n      exceptionDetails,\n      path: request.url,\n      fieldsErrors: this.getFieldsErrors ? this.getFieldsErrors(exception) : undefined\n    };\n\n    response.status(statusCode).json(responseBody);\n  }\n\n\n  protected getFieldsErrors?(exception: Error): Record<string, string[]>;\n}\n","import { BadRequestException } from '@nestjs/common';\nimport IExceptionWithFieldsErrors from './interfaces/exception-with-fields-errors';\n\nexport default class BadRequestDetailedException extends BadRequestException implements IExceptionWithFieldsErrors {\n  constructor(message?: string, public fieldsErrors?: Record<string, string[]>) {\n    super(message);\n  }\n}\n","import { Injectable } from '@nestjs/common';\nimport { JwtService } from '@nestjs/jwt';\nimport { compare, hash } from 'bcryptjs';\nimport * as _ from 'lodash';\nimport { UsersService } from './users.service';\nimport { UserCreationDto, UserDto, ValidateUserDto } from '@boilerplate/shared';\n\n@Injectable()\nexport class AuthService {\n  constructor(\n\tprivate readonly usersService: UsersService,\n\tprivate readonly jwtService: JwtService,\n  ) {}\n\n  public async validateUser(email: string, password: string): Promise<ValidateUserDto> {\n\tconst foundUser: UserDto | null = await this.usersService.findByEmail(email);\n\n\tif (foundUser?.password) {\n\t  const isEqual = await compare(password, foundUser.password);\n\n\t  if (isEqual) {\n\t\treturn { user: _.omit(foundUser, 'password') };\n\t  }\n\n\t  return { error: true, message: 'Incorrect password' };\n\t}\n\n\treturn { error: true, message: 'This user does not exist' };\n  }\n\n  public generateJWT(user: UserDto): string {\n\treturn this.jwtService.sign(user);\n  }\n\n  public async registrateUser(newUserDto: UserCreationDto): Promise<Omit<UserCreationDto, 'password'>> {\n\tconst saltOfRounds = 10;\n\tconst hashPassword = await hash(newUserDto.password, saltOfRounds);\n\n\tconst newUser = await this.usersService.createUser({\n\t  ...newUserDto,\n\t  password: hashPassword,\n\t});\n\n\treturn <Omit<UserCreationDto, 'password'>>_.omit(newUser, 'password');\n  }\n}\n","import { Injectable, NotFoundException } from '@nestjs/common';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { ClientIvsService } from './client-ivs.service';\nimport { \n  ListWithTotals, \n  ChannelDto, \n  ChannelFilter, \n  ChannelCreationDto,\n  StreamPlaybackDto\n} from '@boilerplate/shared';\nimport { Channel } from '@boilerplate/data';\n\n\n@Injectable()\nexport class ChannelsService {\n  constructor(\n\t  @InjectRepository(Channel) private readonly channelsRepository: Repository<Channel>,\n    private readonly clientIvsService: ClientIvsService\n  ) {}\n\n  public async findAll(filter: ChannelFilter): Promise<ListWithTotals<ChannelDto>> {\n    return await this.channelsRepository\n\t    .createQueryBuilder('channels')\n\t    .orderBy('channels.createdAt', 'DESC')\n      .getManyWithTotals(filter);\n  }\n\n  public async getById(id: string): Promise<ChannelDto> {\n    const foundChannel = await this.channelsRepository.findOneBy({ id });\n\n    if (!foundChannel) {\n\t\t\tthrow new NotFoundException('Channel not found');\n\t\t};\n\n    return foundChannel;\n  }\n\n  public async getStreamPlayback(id: string): Promise<StreamPlaybackDto> {\n    const foundChannel = await this.getById(id);\n\n    return await this.clientIvsService.getStreamPlayback(foundChannel.ARN);\n  }\n\n  public async createChannel(name: string): Promise<Channel> {\n    const newChannelData: ChannelCreationDto = \n      await this.clientIvsService.createChannel(name);\n\n\t  const newChannel: Channel = this.channelsRepository.create(newChannelData);\n\n\t  return await this.channelsRepository.save(newChannel);\n  }\n\n  public async updateChannel(body: ChannelDto): Promise<void> {\n    const { id,\tname } = body;\n\n    const foundChannel = await this.getById(id);\n\n    await this.clientIvsService.updateChannel(name, foundChannel.ARN);\n\n    await this.channelsRepository.update(id, { name });\n  }\n\n  public async deleteChannel(id: string): Promise<void> {\n    const foundChannel = await this.getById(id);\n\n    await this.clientIvsService.deleteChannel(foundChannel.ARN);\n\n    await this.channelsRepository.delete(id);\n  }\n}\n","import { Injectable, Logger } from '@nestjs/common';\nimport { ConfigService } from '@nestjs/config';\nimport {\n  ChannelLatencyMode,\n  ChannelType,\n  CreateChannelCommand,\n  CreateChannelCommandInput,\n  CreateChannelCommandOutput,\n  DeleteChannelCommand,\n  DeleteChannelCommandInput,\n  GetStreamCommand,\n  GetStreamCommandInput,\n  GetStreamCommandOutput,\n  IvsClient,\n  UpdateChannelCommand,\n  UpdateChannelCommandInput\n} from '@aws-sdk/client-ivs';\nimport { ChannelCreationDto, StreamPlaybackDto } from '@boilerplate/shared';\nimport { IError, IErrorMessage } from '../interfaces/ivs-service-errors';\nimport { EventsService } from './events.service';\n\n\n@Injectable()\nexport class ClientIvsService {\n  private static readonly logger = new Logger('ClientIvsService');\n  private readonly ivsClient: IvsClient;\n\n  constructor(\n\tprivate readonly configService: ConfigService,\n\tprivate readonly eventsService: EventsService\n  ) {\n\tthis.ivsClient = new IvsClient({\n\t  region: this.configService.get('NX_AMAZON_IVS_REGION'),\n\t  credentials: {\n\t\taccessKeyId: this.configService.get('NX_AMAZON_IVS_ACCESS_KEY_ID'),\n\t\tsecretAccessKey: this.configService.get('NX_AMAZON_IVS_SECRET_ACCESS_KEY')\n\t  }\n\t});\n  }\n\t\t\n  public async getStreamPlayback(channelArn: string): Promise<StreamPlaybackDto> {\n\tconst streamCommandInput: GetStreamCommandInput = { channelArn };\n\t\n\tconst streamCommand: GetStreamCommand = new GetStreamCommand(streamCommandInput);\t\n\t\n\ttry {\t\n\t  const streamData: GetStreamCommandOutput = await this.ivsClient.send(streamCommand);\n\n\t  this.eventsService.emitStream(streamData?.stream?.playbackUrl);\n\n\t  return <StreamPlaybackDto>streamData?.stream;\n\t} catch (error) {\n\t  this.eventsService.emitStream(null);\n\n\t  this.handleError(error);\n\t}\n  }\n\t\t\n  public async createChannel(name: string): Promise<ChannelCreationDto> {\n\tconst channelCommandInput: CreateChannelCommandInput = {\n\t  name,\n\t  authorized: false,\n\t  latencyMode: ChannelLatencyMode.LowLatency,\n\t  type: ChannelType.StandardChannelType\n\t}\n\t  \n\tconst channelCommand: CreateChannelCommand = new CreateChannelCommand(channelCommandInput);\n\t\n\ttry {\n\t  const channelData: CreateChannelCommandOutput = await this.ivsClient.send(channelCommand);\n\t\t  \n\t  const { channel, streamKey } = channelData;\n\t\t\n\t  const streamData: ChannelCreationDto = {\n\t\tname: channel.name,\n\t\tkey: streamKey.value,\n\t\tingestEndpoint: this.getIngestEndpoint(channel.ingestEndpoint),\n\t\tplaybackURL: channel.playbackUrl,\n\t\tARN: channel.arn\n\t  };\n\t\t\n\t  return streamData;\t\n\t} catch (error) {\n\t  this.handleError(error);\n\t}\n  }\n\t\n  public async updateChannel(name: string, arn: string): Promise<void> {\n\tconst channelCommandInput: UpdateChannelCommandInput = { name, arn };\n\t\n\tconst channelCommand: UpdateChannelCommand = new UpdateChannelCommand(channelCommandInput);\n  \n\ttry {\n\t  await this.ivsClient.send(channelCommand);\t\n\t} catch (error) {\n\t  this.handleError(error);\n\t}\n  }\n\n  public async deleteChannel(arn: string): Promise<void> {\n\tconst channelCommandInput: DeleteChannelCommandInput = { arn };\n\t\n\tconst channelCommand: DeleteChannelCommand = new DeleteChannelCommand(channelCommandInput);\n  \n\ttry {\n\t  await this.ivsClient.send(channelCommand);\n\t} catch (error) {\n\t  this.handleError(error);\n\t}\n  }\n\n  private getIngestEndpoint(endpoint: string): string {\n\treturn `rtmps://${endpoint}:443/app/`;\n  }\n\n  private handleError<T extends IErrorMessage>(error: IError<T>) {\n\tconst errorMessage = typeof error === 'string' \n\t  ? error \n\t  : error?.message;\n\t\t\n\tClientIvsService.logger.error(errorMessage, 'ClientIvsService');\n\t\n\tthrow error;\n  }\n}","import { Injectable } from '@nestjs/common';\nimport { EventEmitter2 } from '@nestjs/event-emitter';\nimport { \n  IonicRequisitesEnum, \n  WidgetDto, \n  WidgetsSocketEventsEnum \n} from '@boilerplate/shared';\n\n\n@Injectable()\nexport class EventsService {\n  constructor(private readonly eventEmitter: EventEmitter2) {};\n  \n  public emitStream(playbackUrl: string): void {\n\t  this.eventEmitter.emit(\n      WidgetsSocketEventsEnum.StreamReceived, \n      IonicRequisitesEnum.Id, \n      playbackUrl\n    );\n  }\n\t\t\n  public emitWidgets(widgets: WidgetDto[]): void {\n\t  this.eventEmitter.emit(\n      WidgetsSocketEventsEnum.WidgetsReceived, \n      IonicRequisitesEnum.Id, \n      widgets\n    );\n  }\n\n  public emitVisibleWidgets(widgets: WidgetDto[]): void {\n    this.eventEmitter.emit(\n      WidgetsSocketEventsEnum.WidgetsShown, \n      IonicRequisitesEnum.Id, \n      widgets\n    );\n  }\n\n  public emitPurchasedWidget(id: string, widget: WidgetDto): void {\n    this.eventEmitter.emit(\n      WidgetsSocketEventsEnum.WidgetPurchased, \n      id, \n      widget\n    );\n  }\n}","import { Injectable } from '@nestjs/common';\nimport { OnEvent } from '@nestjs/event-emitter';\nimport { SocketGateway } from '../../socket/socket.gateway';\nimport { WidgetDto, WidgetsSocketEventsEnum } from '@boilerplate/shared';\n\n\n@Injectable()\nexport class WidgetsSocketEventsService {\n  constructor(private readonly socketGateway: SocketGateway) {}\n\n  @OnEvent(WidgetsSocketEventsEnum.WidgetsReceived)\n  public async onNewWidgetsReceived(id: string, widgets: WidgetDto[]): Promise<void> {\n\t  this.socketGateway.emitWidgets(id, widgets);\n  }\n\n  @OnEvent(WidgetsSocketEventsEnum.StreamReceived)\n  public async onNewStreamReceived(id: string, playbackUrl: string | null): Promise<void> {\n\t  this.socketGateway.emitPlaybackUrl(id, playbackUrl);\n  }\n\n  @OnEvent(WidgetsSocketEventsEnum.WidgetsShown)\n  public async onVisibleWidgetReceived(id: string, widgets: WidgetDto[]): Promise<void> {\n\t  this.socketGateway.emitVisibleWidgets(id, widgets);\n  }\n\n  @OnEvent(WidgetsSocketEventsEnum.WidgetPurchased)\n  public async onWidgetPurchased(id: string, widget: WidgetDto): Promise<void> {\n\t  this.socketGateway.emitPurchasedWidget(id, widget);\n  }\n}","import { NonFunctionPropertyNames, OrderFilter, PaginationFilter } from '@boilerplate/shared';\n\nexport type OrderType<Entity> = {\n  [P in NonFunctionPropertyNames<Entity>]?: \"ASC\" | \"DESC\" | 1 | -1\n};\n\nexport function getOrderOptionsFromFilter<T>(filter: OrderFilter<T>): OrderType<T> {\n  return filter.orderedBy?.reduce((acc, v) => ({\n    ...acc,\n    [v.field]: v.isReversed ? 'DESC' : 'ASC'\n  }), {});\n}\n\nexport function getLimitOptionFromFilter(filter: PaginationFilter, defaultSize: number | null = 10): number | null {\n  return filter.pageSize || defaultSize || null;\n}\n\nexport function getOffsetOptionFromFilter(filter: PaginationFilter): number | null {\n  if (filter.page)\n    return getLimitOptionFromFilter(filter) * (filter.page - 1);\n  else\n    return null;\n}\n","import { Injectable } from '@nestjs/common';\nimport { AuthGuard } from '@nestjs/passport';\n\n@Injectable()\nexport class JwtAuthGuard extends AuthGuard('jwt') {}","import { Module } from '@nestjs/common';\nimport { DatabaseModule, User, Channel, Widget } from '@boilerplate/data';\nimport { PassportModule } from '@nestjs/passport';\nimport { JwtModule } from '@nestjs/jwt';\nimport { UsersService } from './users.service';\nimport { ChannelsService } from './channels.service';\nimport { AuthService } from './auth.service';\nimport { WidgetsService } from './widgets.service';\nimport { EventsService } from './events.service';\nimport { WidgetsSocketEventsService } from './events/widgets-socket.events';\nimport { ClientIvsService } from './client-ivs.service';\nimport { JwtStrategy } from './strategy/jwt.strategy';\nimport { JwtAuthGuard } from './guard/jwt.guard';\nimport { LocalStrategy } from './strategy/local.strategy';\nimport { jwtConstants } from '../constants';\nimport { ConfigService } from '@nestjs/config';\nimport { SocketModule } from '../socket/socket.module';\nimport { SocketGateway } from '../socket/socket.gateway';\n\n\n@Module({\n  imports: [\n\tDatabaseModule.forFeature([User, Channel, Widget]),\n\tPassportModule,\n\tJwtModule.register({\n\t  secret: jwtConstants.secret,\n\t  signOptions: {\n\t    expiresIn: jwtConstants.expiresIn\n\t  }\n\t})\n  ],\n  providers: [\n\tConfigService,\n    UsersService,\n\tAuthService,\n\tWidgetsService,\n\tWidgetsSocketEventsService,\n\tEventsService,\n\tChannelsService,\n\tClientIvsService,\n\tJwtAuthGuard,\n\tJwtStrategy,\n\tLocalStrategy,\n\tSocketModule,\n\tSocketGateway\n  ],\n  exports: [\n    UsersService,\n\tAuthService,\n\tChannelsService,\n\tWidgetsService,\n\tWidgetsSocketEventsService,\n\tEventsService,\n\tClientIvsService\n  ]\n})\n\nexport class ServicesModule {}\n","import { ExtractJwt, Strategy } from 'passport-jwt';\nimport { PassportStrategy } from '@nestjs/passport';\nimport { Injectable } from '@nestjs/common';\nimport { UserDto } from '@boilerplate/shared';\nimport { jwtConstants } from '../../constants';\n\n@Injectable()\nexport class JwtStrategy extends PassportStrategy(Strategy) {\n\tconstructor() {\n\t\tsuper({\n\t\t\tjwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n\t\t\tignoreExpiration: false,\n\t\t\tsecretOrKey: jwtConstants.secret,\n\t\t});\n\t}\n\n\tpublic validate(payload: UserDto): UserDto {\n\t\treturn payload;\n\t}\n}\n","import { Strategy } from 'passport-local';\nimport { PassportStrategy } from '@nestjs/passport';\nimport { Injectable, UnauthorizedException } from '@nestjs/common';\nimport { AuthService } from '../auth.service';\nimport { UserDto } from '@boilerplate/shared';\n\n@Injectable()\nexport class LocalStrategy extends PassportStrategy(Strategy) {\n    constructor(private readonly authService: AuthService) {\n        super({\n            usernameField: 'email'\n        });\n    }\n\n    public async validate(email: string, password: string): Promise<UserDto | undefined> {\n        const { user, error, message } = await this.authService.validateUser(email, password);\n\n        if (!user && error)\n            throw new UnauthorizedException(message);\n\n        return user;\n    }\n}\n","import { Injectable } from '@nestjs/common';\nimport { UserCreationDto, UserDto, UserFilter } from '@boilerplate/shared';\nimport { User } from '@boilerplate/data';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport {\n  getLimitOptionFromFilter,\n  getOffsetOptionFromFilter,\n  getOrderOptionsFromFilter\n} from './extensions/filters/base-filters-extensions';\n\n@Injectable()\nexport class UsersService {\n  constructor(\n\t\t@InjectRepository(User) private readonly usersRepository: Repository<User>\n  ) {\n  }\n\n  public async findAll(filter: UserFilter): Promise<UserDto[]> {\n    return this.usersRepository.find({\n      order: getOrderOptionsFromFilter(filter),\n      take: getLimitOptionFromFilter(filter),\n      skip: getOffsetOptionFromFilter(filter)\n    });\n  }\n\n  public async findByEmail(email: string): Promise<UserDto | null> {\n  \treturn await this.usersRepository.findOne({ where: { email } });\n\t}\n\n  public async createUser(dto: UserCreationDto) {\n\t\tconst user = this.usersRepository.create(dto);\n    \n\t\treturn await this.usersRepository.save(user);\n\t}\n}\n\n","import { Injectable, NotFoundException } from '@nestjs/common';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { EventsService } from './events.service';\nimport { Widget } from '@boilerplate/data';\nimport { \n  ListWithTotals, \n  WidgetDto, \n  WidgetFilter\n} from '@boilerplate/shared';\n\n\n@Injectable()\nexport class WidgetsService {\n  constructor(\n\t@InjectRepository(Widget) private readonly widgetsRepository: Repository<Widget>,\n\tprivate readonly eventsService: EventsService\n  ) {}\n\n  public async findAll(\n\tchannelId: string, \n\tfilter: WidgetFilter\n  ): Promise<ListWithTotals<WidgetDto>> {\n\treturn await this.widgetsRepository\n\t  .createQueryBuilder('widgets')\n\t  .where({ channelId })\n\t  .orderBy('widgets.createdAt', 'DESC')\n\t  .getManyWithTotals(filter);\n  }\n\n  public async getById(id: string): Promise<WidgetDto> {\n    const foundWidget = await this.widgetsRepository.findOneBy({ id });\n\n    if (!foundWidget) {\n\t  throw new NotFoundException('Channel not found');\n\t};\n\n    return foundWidget;\n  }\n\n  public async createWidget(body: WidgetDto): Promise<Widget> {\n\tconst newWidget = this.widgetsRepository.create(body);\n\t  \n\treturn await this.widgetsRepository.save(newWidget);\n  }\n\n  public async showVisibleWidgets(body: string[]): Promise<WidgetDto[]> {\n\tconst widgets: WidgetDto[] = [];\n\n\tfor (const id of body) {\n\t  const widget = await this.getById(id);\n\n\t  widgets.push(widget);\n\t}\n\n\treturn widgets;\n  }\n\n  public async updateWidget(body: WidgetDto): Promise<void> {\n\tconst {\n\t  id,\t \n\t  ...bodyWithoutId\n\t} = body;\n\n\tawait this.widgetsRepository.update(id, bodyWithoutId);\n  }\n\n  public async deleteWidget({ channelId, widgetId }): Promise<void> {\n\tconst foundWidget = await this.widgetsRepository.findOne({\n\t  where: { \n\t\tid: widgetId, \n\t\tchannelId \n\t  }\n\t});\n\n\tif (!foundWidget) {\n\t  throw new NotFoundException('Widget not found');\n\t};\n\n\tawait this.widgetsRepository.delete(widgetId);\n  }\n}","import { Logger } from '@nestjs/common';\nimport { Server, Socket } from 'socket.io';\nimport { \n  ConnectedSocket, \n  MessageBody, \n  OnGatewayConnection, \n  OnGatewayDisconnect, \n  OnGatewayInit, \n  SubscribeMessage, \n  WebSocketGateway, \n  WebSocketServer \n} from '@nestjs/websockets';\nimport { SocketEnum, WidgetDto } from '@boilerplate/shared';\nimport { EventsService } from '../services/events.service';\nimport { WidgetsService } from '../services/widgets.service';\n\n\n@WebSocketGateway({ namespace: '/api', transports: ['websocket', 'polling'], cors: true })\nexport class SocketGateway implements OnGatewayInit, OnGatewayConnection, OnGatewayDisconnect {\n  private static readonly logger = new Logger('SocketGateway');\n\n  @WebSocketServer()\n  private readonly server: Server;\n\n  private readonly userRoomPrefix = 'user-';\n  private readonly playerRoomPrefix = 'player-';\n  private readonly widgetsRoomPrefix = 'widgets-';\n\n  private readonly visibleWidgetsRoomPrefix = 'visible-widgets-';\n  private readonly purchasedWidgetsRoomPrefix = 'purchased-widgets-';\n\n  constructor(\n\t  private readonly eventsService: EventsService,\n    private readonly widgetsService: WidgetsService\n  ) {}\n\n  // Player \n  @SubscribeMessage(SocketEnum.JoinPlayer)\n  async onClientJoinAmazonIVSPlayer(\n\t  @MessageBody('id') id: string, @ConnectedSocket() client: Socket\n  ): Promise<void> {\n    const playerRoom = this.generatePlayerRoom(id);\n\n    client.join(playerRoom);\n\n    SocketGateway.logger.log(`User ${id} is joined to room ${playerRoom}`);\n  }\n\n  @SubscribeMessage(SocketEnum.LeftPlayer)\n  async onClientLeftAmazonIVSPlayer(\n    @MessageBody('id') id: string, \n    @ConnectedSocket() client: Socket\n  ): Promise<void> {\n    const playerRoom = this.generatePlayerRoom(id);\n      \n    client.leave(playerRoom);\n\n    SocketGateway.logger.warn(`User ${id} is leaved room ${playerRoom}`);\n  }\n\n\n  // Widgets\n  @SubscribeMessage(SocketEnum.JoinWidgets)\n  async onClientJoinWidgets(\n    @MessageBody('id') id: string, \n    @ConnectedSocket() client: Socket\n  ): Promise<void> {\n    const widgetsRoom = this.generateWidgetsRoom(id);\n\n    client.join(widgetsRoom);\n\n    SocketGateway.logger.log(`User ${id} is joined to room ${widgetsRoom}`);\n  }\n\n  @SubscribeMessage(SocketEnum.LeftWidgets)\n  async onClientLeftWidgets(\n    @MessageBody('id') id: string, \n    @ConnectedSocket() client: Socket\n  ): Promise<void> {\n    const widgetsRoom = this.generateWidgetsRoom(id);\n\n    client.leave(widgetsRoom);\n\n    SocketGateway.logger.warn(`User ${id} is leaved room ${widgetsRoom}`);\n  }\n\n  @SubscribeMessage(SocketEnum.ReceivedWidgets)\n  async onReceiveWidgets(\n    @MessageBody() data: WidgetDto[]\n  ): Promise<void> {\n    this.eventsService.emitWidgets(data || []);\n  }\n\n  // Show visible widgets \n  @SubscribeMessage(SocketEnum.JoinVisibleWidgets)\n  async onClientJoinVisibleWidgets(\n    @MessageBody('id') id: string, \n    @ConnectedSocket() client: Socket\n  ): Promise<void> {\n    const visibleWidgetsRoom = this.generateVisibleWidgetsRoom(id);\n\n    client.join(visibleWidgetsRoom);\n\n    SocketGateway.logger.log(`User ${id} is joined to room ${visibleWidgetsRoom}`);\n  }\n\n  @SubscribeMessage(SocketEnum.LeftVisibleWidgets)\n  async onClientLeftVisibleWidgets(\n    @MessageBody('id') id: string, \n    @ConnectedSocket() client: Socket\n  ): Promise<void> {\n    const visibleWidgetsRoom = this.generateVisibleWidgetsRoom(id);\n\n    client.leave(visibleWidgetsRoom);\n\n    SocketGateway.logger.warn(`User ${id} is leaved room ${visibleWidgetsRoom}`);\n  }\n\n  @SubscribeMessage(SocketEnum.ReceivedVisibleWidgets)\n  async onReceiveVisibleWidgets(\n    @MessageBody() data: string[]\n  ): Promise<void> {\n    const widgets = await this.widgetsService.showVisibleWidgets(data);\n\n    this.eventsService.emitVisibleWidgets(widgets);\n  }\n\n\n // Buying widgets\n @SubscribeMessage(SocketEnum.JoinPurchasedWidgets)\n async onClientJoinPurchasedWidgets(\n   @MessageBody('id') id: string, \n   @ConnectedSocket() client: Socket\n ): Promise<void> {\n   const purchasedWidgetsRoom = this.generatePurchasedWidgetsRoom(id);\n\n   client.join(purchasedWidgetsRoom);\n\n   SocketGateway.logger.log(`User ${id} is joined to room ${purchasedWidgetsRoom}`);\n }\n\n @SubscribeMessage(SocketEnum.LeftPurchasedWidgets)\n async onClientLeftPurchasedWidgets(\n   @MessageBody('id') id: string, \n   @ConnectedSocket() client: Socket\n ): Promise<void> {\n   const purchasedWidgetsRoom = this.generatePurchasedWidgetsRoom(id);\n\n   client.leave(purchasedWidgetsRoom);\n\n   SocketGateway.logger.warn(`User ${id} is leaved room ${purchasedWidgetsRoom}`);\n }\n\n @SubscribeMessage(SocketEnum.PurchasedWidget)\n async onReceivePurchasedWidgets(\n   @MessageBody() data: WidgetDto,\n   @ConnectedSocket() client: Socket\n ): Promise<void> {\n   this.eventsService.emitPurchasedWidget(client.data.user, data);\n }\n\n public emitPurchasedWidget(id: string, widget: WidgetDto) {\n   const purchasedWidgetsRoom = this.generatePurchasedWidgetsRoom(id);\n\n   this.server.to(purchasedWidgetsRoom).emit(`${SocketEnum.PurchasedWidget}_${id}`, widget);\n }\n\n  public emitVisibleWidgets(id: string, widgets: WidgetDto[]) {\n    const visibleWidgetsRoom = this.generateVisibleWidgetsRoom(id);\n\n    this.server.to(visibleWidgetsRoom).emit(`${SocketEnum.ReceivedVisibleWidgets}_${id}`, widgets);\n  }\n\n  public emitPlaybackUrl(id: string, playbackUrl: string) {\n    const playerRoom = this.generatePlayerRoom(id);\n\n    this.server.to(playerRoom).emit(`${SocketEnum.ReceivedPlaybackUrl}_${id}`, playbackUrl);\n  }\n\n  public emitWidgets(id: string, widgets: WidgetDto[]) {\n    const widgetsRoom = this.generateWidgetsRoom(id);\n\n    this.server.to(widgetsRoom).emit(`${SocketEnum.ReceivedWidgets}_${id}`, widgets);\n  }\n\n  // Connection handling\n  public async handleConnection(@ConnectedSocket() client: Socket) {\n    try {\n      const user = client.handshake.query?.id \n        ? <string>client.handshake.query.id \n        : <string>client.handshake.query.id;\n\n      client.data.user = user;\n\n      const ionicRoom = this.generateUserRoom(user);\n\n      client.join(ionicRoom);\n\n      SocketGateway.logger.log(`User ${user} is connected`);\n    } catch (error) {\n      SocketGateway.logger.error(error?.message, `User disconnected`);\n      client.disconnect();\n    }\n  }\n\n  afterInit() {\n\t  SocketGateway.logger.log(`User inited`);\n  }\n\t\n  handleDisconnect() {\n\t  SocketGateway.logger.warn(`User disconnected`);\n  }\n\n  // generate room methods\n  private readonly generateUserRoom = (id: string) => `${this.userRoomPrefix}_${id}`;\n\n  private readonly generatePlayerRoom = (id: string) => `${this.playerRoomPrefix}_${id}`;\n\n  private readonly generateWidgetsRoom = (id: string) => `${this.widgetsRoomPrefix}_${id}`;\n\n  private readonly generateVisibleWidgetsRoom = (id: string) => `${this.visibleWidgetsRoomPrefix}_${id}`;\n\n  private readonly generatePurchasedWidgetsRoom = (id: string) => `${this.purchasedWidgetsRoomPrefix}_${id}`;\n}","import { forwardRef, Module } from '@nestjs/common';\nimport { ConfigModule } from '@nestjs/config';\nimport { SocketGateway } from './socket.gateway';\nimport { ServicesModule } from '../services/services.module';\n\n\n@Module({\n  imports: [\n\t  forwardRef(() => ServicesModule), ConfigModule\n  ],\n  providers: [SocketGateway],\n  exports: [SocketGateway]\n})\n\nexport class SocketModule {}","export const TestConstant = 'TEST';\n","import { DynamicModule } from '@nestjs/common';\nimport { ConfigModule } from '@nestjs/config';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport {\n  TypeOrmModuleAsyncOptions,\n  TypeOrmModuleOptions\n} from '@nestjs/typeorm/dist/interfaces/typeorm-options.interface';\nimport { EntitySchema } from 'typeorm/entity-schema/EntitySchema';\nimport { User, Channel, Widget } from './models';\nimport { DatabaseMigrationService } from './services';\nimport { DbMigration } from './models/db-migration.entity';\n\n\nexport const modelsToInclude = [\n  DbMigration,\n  Channel,\n  User,\n  Widget\n];\n\ntype DatabaseModuleOptions = TypeOrmModuleOptions & {\n  entities: EntitySchema[];\n};\n\nexport class DatabaseModule extends TypeOrmModule {\n  public static forRootAsync(options: TypeOrmModuleAsyncOptions): DynamicModule {\n\tconst oldUseFactory = options.useFactory;\n\n\tif (oldUseFactory) {\n\t  options.useFactory = async (...args) => {\n\t\tconst sourceOptions = await oldUseFactory(...args);\n\n\t\treturn {\n\t\t  ...sourceOptions,\n\t\t  entities: [\n\t\t\t...(sourceOptions?.entities as Array<EntitySchema> || []),\n\t\t\t ...modelsToInclude\n\t\t  ]\n\t\t};\n\t  };\n\t}\n\n\tconst module = super.forRootAsync(options);\n\n\treturn this.ExtendModuleWithCustomServices(module);\n  }\n\n  public static forRoot(options: DatabaseModuleOptions): DynamicModule {\n\tconst module = super.forRoot({\n\t  ...options,\n\t  entities: [\n\t\t...(options.entities || []),\n\t\t...modelsToInclude\n\t  ]\n\t});\n\n\treturn this.ExtendModuleWithCustomServices(module);\n  }\n\n  private static ExtendModuleWithCustomServices(module: DynamicModule): DynamicModule {\n\tconst servicesToAdd = [\n\t  DatabaseMigrationService\n\t];\n\n\treturn {\n\t  ...module,\n\t  imports: [\n\t\t...(module.imports || []),\n\t\tConfigModule\n\t  ],\n\t  providers: [\n\t\t...(module.providers || []),\n\t\t...servicesToAdd\n\t  ],\n\t  exports: [\n\t\t...(module.exports || []),\n\t\t...servicesToAdd\n\t  ]\n\t}\n  }\n}\n","import { NonFunctionPropertyNames, OrderFilter, PaginationFilter } from '@boilerplate/shared';\n\nexport type OrderType<Entity> = {\n  [P in NonFunctionPropertyNames<Entity>]?: \"ASC\" | \"DESC\" | 1 | -1\n};\n\nexport function getOrderOptionsFromFilter<T>(filter: OrderFilter<T>): OrderType<T> {\n  return filter.orderedBy?.reduce((acc, v) => ({\n    ...acc,\n    [v.field]: v.isReversed ? 'DESC' : 'ASC'\n  }), {});\n}\n\nexport function getLimitOptionFromFilter(filter: PaginationFilter, defaultSize: number | null = 10): number | null {\n  return filter.pageSize || defaultSize || null;\n}\n\nexport function getOffsetOptionFromFilter(filter: PaginationFilter): number | null {\n  if (filter.page)\n    return getLimitOptionFromFilter(filter) * (filter.page - 1);\n  else\n    return null;\n}\n","export * from './base-filters-extensions';\n\nexport * from './list-with-totals-extensions';","import { SelectQueryBuilder } from 'typeorm/query-builder/SelectQueryBuilder';\nimport { PaginationFilter, ListWithTotals } from '@boilerplate/shared';\nimport { \n  getLimitOptionFromFilter, \n  getOffsetOptionFromFilter \n} from './base-filters-extensions';\n\n\ndeclare module 'typeorm/query-builder/SelectQueryBuilder' {\n  interface SelectQueryBuilder<Entity> {\n    getManyWithTotals(\n      this: SelectQueryBuilder<Entity>,\n      filter: PaginationFilter,\n      disableTotalsCalculation?: boolean\n    ): Promise<ListWithTotals<Entity>>;\n  }\n}\n\nSelectQueryBuilder.prototype.getManyWithTotals = async function <Entity>(\n  this: SelectQueryBuilder<Entity>,\n  filter: PaginationFilter,\n  disableTotalsCalculation = false\n): Promise<ListWithTotals<Entity>> {\n  const currentLimit = getLimitOptionFromFilter(filter);\n\n  const currentOffset = getOffsetOptionFromFilter(filter);\n\n  const totalCountReq = disableTotalsCalculation ? null : this.getCount();\n\n  const currentPageReq = this.limit(currentLimit).offset(currentOffset).getMany();\n\n  const [totalCount, currentPage] = await Promise.all([totalCountReq, currentPageReq]);\n\n  return {\n\tlist: currentPage,\n\tlimit: currentLimit,\n\toffset: currentOffset,\n\ttotal: totalCount\n  };\n};\n","export * from './database.module';\n\nexport * from './models';\n\nexport * from './constants';\n\nexport * from './services';\n\nexport * from './interfaces';\n\nexport * from './extensions';","export * from './config-params';\n","import { MigrationParams, RunnableMigration } from 'umzug/lib/types';\nimport { Table } from 'typeorm';\nimport { MigrationContext } from '../utility-types';\n\n\nexport class CreateUsersTable20220114133300 implements RunnableMigration<MigrationContext> {\n  public name = '20220114133300.CreateUsersTable';\n\n  public async up(params: MigrationParams<MigrationContext>): Promise<void> {\n\tconst { context: { queryRunner } } = params;\n\n\tawait queryRunner.query('CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";');\n\n\tawait queryRunner.createTable(new Table({\n\t  name: 'users',\n\t  columns: [\n\t\t{\n\t\t  name: 'id',\n\t\t  type: 'uuid',\n\t\t  isPrimary: true,\n\t\t  isGenerated: true,\n\t\t  generationStrategy: 'uuid'\n\t\t},\n\t\t{\n\t\t  name: 'name',\n\t\t  type: 'text',\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'email',\n\t\t  type: 'text',\n\t\t  isUnique: true,\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'password',\n\t\t  type: 'text',\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'createdAt',\n\t\t  type: 'timestamp',\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'updatedAt',\n\t\t  type: 'timestamp',\n\t\t  isNullable: true\n\t\t},\n\t  ]\n\t}));\n  }\n\n  public async down(params: MigrationParams<MigrationContext>): Promise<void> {\n\tconst { context: { queryRunner } } = params;\n\n\tawait queryRunner.dropTable('users');\n  }\n}\n","import { MigrationParams, RunnableMigration } from 'umzug/lib/types';\nimport { Table } from 'typeorm';\nimport { MigrationContext } from '../utility-types';\n\n\nexport class CreateStreamsTable20230118145608 implements RunnableMigration<MigrationContext> {\n  public name = '20230118145608.CreateStreamsTable';\n\n  public async up(params: MigrationParams<MigrationContext>): Promise<void> {\n\tconst { context: { queryRunner } } = params;\n\n\tawait queryRunner.createTable(new Table({\n\t  name: 'streams',\n\t  columns: [\n\t\t{\n\t\t  name: 'id',\n\t\t  type: 'uuid',\n\t\t  isPrimary: true,\n\t\t  isGenerated: true,\n\t\t  generationStrategy: 'uuid'\n\t\t},\n\t\t{\n\t\t  name: 'name',\n\t\t  type: 'text',\n\t\t  isUnique: true,\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'key',\n\t\t  type: 'text',\n\t\t  isUnique: true,\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'ingestEndpoint',\n\t\t  type: 'text',\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'playbackURL',\n\t\t  type: 'text',\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'ARN',\n\t\t  type: 'text',\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'createdAt',\n\t\t  type: 'timestamp',\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'updatedAt',\n\t\t  type: 'timestamp',\n\t\t  isNullable: true\n\t\t}\n\t  ]\n\t}));\n  }\n\n  public async down(params: MigrationParams<MigrationContext>): Promise<void> {\n\tconst { context: { queryRunner } } = params;\n\n\tawait queryRunner.dropTable('streams');\n  }\n}\n","import { Table, TableColumn, TableForeignKey } from 'typeorm';\nimport { MigrationParams, RunnableMigration } from 'umzug/lib/types';\nimport { MigrationContext } from '../utility-types';\n\nexport class CreateWidgetsTable20230120171731 implements RunnableMigration<MigrationContext> {\n  public name = '20230120171731.CreateWidgetsTable';\n\n  public async up(params: MigrationParams<MigrationContext>): Promise<void> {\n\tconst { context: { queryRunner } } = params;\n\n\tawait queryRunner.createTable(new Table({\n\t  name: 'widgets',\n\t  columns: [\n\t\t{\n\t\t  name: 'id',\n\t\t  type: 'uuid',\n\t\t  isPrimary: true,\n\t\t  isGenerated: true,\n\t\t  generationStrategy: 'uuid'\n\t\t},\n\t\t{\n\t\t  name: 'title',\n\t\t  type: 'text',\n\t\t  isUnique: true,\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'url',\n\t\t  type: 'text',\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'price',\n\t\t  type: 'numeric',\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'startX',\n\t\t  type: 'smallint',\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'startY',\n\t\t  type: 'smallint',\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'createdAt',\n\t\t  type: 'timestamp',\n\t\t  isNullable: false\n\t\t},\n\t\t{\n\t\t  name: 'updatedAt',\n\t\t  type: 'timestamp',\n\t\t  isNullable: true\n\t\t}\n\t  ]\n    }));\n\n\tawait queryRunner.addColumn(\n\t  'widgets',\n\t  new TableColumn({\n\t\tname: 'streamId',\n\t\ttype: 'uuid'\n\t  })\n\t);\n\n\tawait queryRunner.createForeignKey(\n\t  'widgets',\n\t  new TableForeignKey({\n\t\tcolumnNames: ['streamId'],\n\t\treferencedColumnNames: ['id'],\n\t\treferencedTableName: 'streams',\n\t\tonDelete: 'CASCADE'\n\t  })\n\t);\n  }\n\n  public async down(params: MigrationParams<MigrationContext>): Promise<void> {\n\tconst { context: { queryRunner } } = params;\n\n\tawait queryRunner.dropTable('widgets');\n  }\n}\n","import { MigrationParams, RunnableMigration } from 'umzug/lib/types';\nimport { MigrationContext } from '../utility-types';\n\nexport class AlterStreamsTableRenameTableToChannels20230130235651 implements RunnableMigration<MigrationContext> {\n  public name = '20230130235651.AlterStreamsTableRenameTableToChannels';\n\n  public async up(params: MigrationParams<MigrationContext>): Promise<void> {\n\t  const { context: { queryRunner } } = params;\n\n    await queryRunner.renameTable('streams', 'channels');\n  }\n\n  public async down(params: MigrationParams<MigrationContext>): Promise<void> {\n\t  const { context: { queryRunner } } = params;\n\n    await queryRunner.renameTable('channels', 'streams');\n  }\n}\n","import { MigrationParams, RunnableMigration } from 'umzug/lib/types';\nimport { MigrationContext } from '../utility-types';\n\nexport class AlterWidgetsTableRenameColumn20230131005425 implements RunnableMigration<MigrationContext> {\n  public name = '20230131005425.AlterWidgetsTableRenameColumn';\n\n  public async up(params: MigrationParams<MigrationContext>): Promise<void> {\n    const {\n\t\t\tcontext: { queryRunner },\n\t\t} = params;\n\n\t\tawait queryRunner.renameColumn('widgets', 'streamId', 'channelId');\n  }\n\n  public async down(params: MigrationParams<MigrationContext>): Promise<void> {\n    const {\n\t\t\tcontext: { queryRunner },\n\t\t} = params;\n\n\t\tawait queryRunner.renameColumn('widgets', 'channelId', 'streamId');\n  }\n}\n","import { InputMigrations } from 'umzug';\nimport { MigrationContext } from '../utility-types';\nimport { CreateUsersTable20220114133300 } from './20220114133300.CreateUsersTable';\nimport { CreateStreamsTable20230118145608 } from './20230118145608.CreateStreamsTable';\nimport { CreateWidgetsTable20230120171731 } from './20230120171731.CreateWidgetsTable';\nimport { AlterStreamsTableRenameTableToChannels20230130235651 } from './20230130235651.AlterStreamsTableRenameTableToChannels';\nimport { AlterWidgetsTableRenameColumn20230131005425 } from './20230131005425.AlterWidgetsTableRenameColumn';\n// --imports_section_end\n\nconst migrationsList: InputMigrations<MigrationContext> = [\n  new CreateUsersTable20220114133300(),\n  new CreateStreamsTable20230118145608(),\n\tnew CreateWidgetsTable20230120171731(),\n\tnew AlterStreamsTableRenameTableToChannels20230130235651(),\n\tnew AlterWidgetsTableRenameColumn20230131005425(),\n// --migrations_list_end\n];\n\nexport default migrationsList;\n","import {\n\tBeforeInsert,\n\tColumn,\n\tEntity,\n\tOneToMany,\n  PrimaryGeneratedColumn,\n  UpdateDateColumn\n} from 'typeorm';\nimport { Widget } from '.';\n\n\n@Entity({ name: 'channels' })\nexport class Channel {\n  @PrimaryGeneratedColumn()\n  id: string;\n\n  @Column()\n  name: string;\n\n  @Column()\n  key: string;\n\n  @Column()\n  ingestEndpoint: string;\n\n  @Column()\n  playbackURL: string;\n\n  @Column()\n  ARN: string;\n\n\t@OneToMany(\n\t\t() => Widget,\n\t\t(widget) => widget.channel,\n\t\t{ cascade: ['insert', 'update'] }\n\t)\n\twidgets: Widget[];\n\n  @Column()\n  public createdAt: Date;\n\n  @UpdateDateColumn({ type: 'timestamptz' })\n  public updatedAt: Date;\n\n  @BeforeInsert()\n  private beforeInsert(): void {\n\t  this.createdAt = new Date();\n  }\n}\n","import { Entity, Column, PrimaryGeneratedColumn } from 'typeorm';\n\n@Entity({ name: 'database_migrations' })\nexport class DbMigration {\n\t@PrimaryGeneratedColumn('uuid')\n\tid: string;\n\n\t@Column({type:'timestamp'})\n\tmigrated_at: Date;\n\n\t@Column()\n\tname: string;\n}\n","export * from './user.entity';\nexport * from './channel.entity';\nexport * from './widget.entity';\n","import { \n  Entity, \n  Column, \n  PrimaryGeneratedColumn, \n  BeforeInsert, \n  UpdateDateColumn \n} from 'typeorm';\n\n@Entity({ name: 'users' })\nexport class User {\n  @PrimaryGeneratedColumn()\n  id: string;\n\n  @Column()\n  name: string;\n\n  @Column()\n  email: string;\n\n  @Column()\n  password: string;\n\n  @Column({ type: 'timestamptz' })\n  public createdAt: Date;\n  \n  @UpdateDateColumn({ type: 'timestamptz' })\n  public updatedAt: Date;\n  \n  @BeforeInsert()\n  private beforeInsert(): void {\n    this.createdAt = new Date();\n  }\n}","import {\n\tBeforeInsert,\n  Column,\n\tEntity,\n\tManyToOne,\n\tPrimaryGeneratedColumn,\n  UpdateDateColumn\n} from 'typeorm';\nimport { Channel } from '../models';\n\n\n@Entity({ name: 'widgets' })\nexport class Widget {\n  @PrimaryGeneratedColumn()\n  id: string;\n\n  @Column()\n  title: string;\n\n  @Column()\n  url: string;\n\n  @Column('numeric', {precision: 14, scale: 2})\n  price: number;\n\n  @Column('smallint')\n  startX: number;\n\n  @Column('smallint')\n  startY: number;\n\n  @Column()\n  channelId: string;\n\n\t@ManyToOne(() => Channel, channel => channel.widgets)\n\tchannel: Channel;\n\n  @Column()\n  public createdAt: Date;\n\n  @UpdateDateColumn({ type: 'timestamptz' })\n  public updatedAt: Date;\n\n  @BeforeInsert()\n  private beforeInsert(): void {\n    this.createdAt = new Date();\n  }\n}\n","import { Injectable, Logger, OnModuleInit } from '@nestjs/common';\nimport { Connection, In, QueryRunner, Table } from 'typeorm';\nimport { Umzug, MigrationMeta, InputMigrations } from 'umzug';\nimport { MigrationContext } from '../utility-types';\nimport { TypeOrmUmzugStorage } from './type-orm-umzug.storage';\nimport { ConfigService } from '@nestjs/config';\nimport migrations from '../migrations';\nimport { DbMigration } from '../models/db-migration.entity';\nimport { IDatabaseConfigParams } from '../interfaces';\n\n@Injectable()\nexport class DatabaseMigrationService implements OnModuleInit {\n  private static readonly logger = new Logger('DatabaseMigrationService');\n\n  private readonly tableName = 'database_migrations';\n\n\tconstructor(private readonly connection: Connection,\n\t\t\t\t\t\t\tprivate readonly configService: ConfigService<IDatabaseConfigParams>) {\n\t}\n\n\tpublic async onModuleInit(): Promise<void> {\n\t\tawait this.migrateAuto();\n\t}\n\n\tpublic async migrateAuto(): Promise<void> {\n\t\tif (!(this.configService.get('NX_DATABASE_ENABLE_MIGRATIONS') === 'true')) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.migrate(migrations);\n\t}\n\n\tpublic async migrate(migrationsList: InputMigrations<MigrationContext>): Promise<void> {\n\t\tconst queryRunner = this.connection.createQueryRunner();\n\t\tawait queryRunner.connect();\n\t\tawait queryRunner.startTransaction();\n\n\t\tlet pendingMigrations: MigrationMeta[];\n\n\t\tawait this.createTableIfNotExist(queryRunner);\n\n\t\tawait queryRunner.commitTransaction();\n\t\tawait queryRunner.startTransaction();\n\n\t\ttry {\n\t\t\tconst umzug = new Umzug({\n\t\t\t\tmigrations: migrationsList,\n\t\t\t\tcontext: () => ({\n\t\t\t\t\tqueryRunner,\n\t\t\t\t\tlogger: DatabaseMigrationService.logger,\n\t\t\t\t} as MigrationContext),\n\t\t\t\tstorage: new TypeOrmUmzugStorage(),\n\t\t\t\tlogger: {\n\t\t\t\t\tinfo: (message) => { DatabaseMigrationService.logger.log(message) },\n\t\t\t\t\tdebug: (message) => { DatabaseMigrationService.logger.debug(message) },\n\t\t\t\t\terror: (message) => { DatabaseMigrationService.logger.error(message) },\n\t\t\t\t\twarn: (message) => { DatabaseMigrationService.logger.warn(message) }\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tDatabaseMigrationService.logger.log('Migrations are enabled. Running...');\n\t\t\tpendingMigrations = await umzug.pending();\n\n\t\t\tif (pendingMigrations.length) {\n\t\t\t\tawait umzug.up();\n\n\t\t\t\tDatabaseMigrationService.logger.log('Migrations complete');\n\t\t\t} else {\n\t\t\t\tDatabaseMigrationService.logger.log('No pending migrations found');\n\t\t\t}\n\n      await queryRunner.commitTransaction();\n\t\t} catch (e) {\n\t\t\tDatabaseMigrationService.logger.error('Exception occurred when migrating', e.message);\n\t\t\tawait queryRunner.rollbackTransaction();\n\n\t\t\tawait queryRunner.manager.delete(DbMigration, {\n\t\t\t\tname: In(pendingMigrations.map((x) => x.name))\n\t\t\t});\n\t\t} finally {\n\t\t\tawait queryRunner.release();\n\t\t}\n\t}\n\n\tprivate async createTableIfNotExist(queryRunner: QueryRunner): Promise<void> {\n\t\tawait queryRunner.createTable(new Table({\n\t\t\tname: this.tableName,\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\tname: 'id',\n\t\t\t\t\ttype: 'uuid',\n\t\t\t\t\tisPrimary: true,\n\t\t\t\t\tisGenerated: true,\n\t\t\t\t\tgenerationStrategy: 'uuid'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'migrated_at',\n\t\t\t\t\ttype: 'timestamp'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'name',\n\t\t\t\t\ttype: 'text'\n\t\t\t\t}\n\t\t\t]\n\t\t}), true);\n\t}\n}\n","export * from './database-migration.service';\n","import { UmzugStorage } from 'umzug/lib/storage/contract';\nimport { MigrationContext } from '../utility-types';\nimport { MigrationParams } from 'umzug/lib/types';\nimport { DbMigration } from '../models/db-migration.entity';\n\nexport class TypeOrmUmzugStorage implements UmzugStorage<MigrationContext> {\n\tpublic async executed(meta: Pick<MigrationParams<MigrationContext>, \"context\">): Promise<string[]> {\n\t\tconst migrations: DbMigration[] = await meta.context.queryRunner.manager.find(DbMigration);\n\n\t\treturn migrations.map(x => x.name);\n\t}\n\n\tpublic async logMigration(params: MigrationParams<MigrationContext>): Promise<void> {\n\t\tawait params.context.queryRunner.manager.insert(DbMigration, {migrated_at: new Date(), name: params.name});\n\t}\n\n\tpublic async unlogMigration(params: MigrationParams<MigrationContext>): Promise<void> {\n\t\tawait params.context.queryRunner.manager.delete(DbMigration, {name: params.name});\n\t}\n}\n","export enum IonicRequisitesEnum {\n  Id = '51d57649-s8tc-hc97-9rm5-3e5ffef1zuq1l'\n}","export enum SocketEnum {\n  JoinPlayer = 'join-player',\n  LeftPlayer = 'left-player',\n\n  JoinWidgets = 'join-widgets',\n  LeftWidgets = 'left-widgets',\n\n  ReceivedPlaybackUrl = 'received-playback-url',\n  ReceivedWidgets = 'received-widgets',\n\n  JoinVisibleWidgets = 'join-visible-widgets',\n  LeftVisibleWidgets = 'left-visible-widgets',\n  ReceivedVisibleWidgets = 'received-visible-widgets',\n\n  JoinPurchasedWidgets = 'join-purchased-widgets',\n  LeftPurchasedWidgets = 'left-purchased-widgets',\n  PurchasedWidget = 'purchased-widget'\n}\n","export enum UserRolesEnum {\n  Admin = '25e102f4-7ee1-4fca-9071-f16e03da237b',\n  User = '12c57649-f88c-4c97-9a75-3e5ffef1b9d6'\n}\n","export enum WidgetsSocketEventsEnum {\n  WidgetsReceived = 'widgets.received',\n  StreamReceived = 'stream.received',\n  WidgetsShown = 'widgets.shown',\n  WidgetPurchased = 'widget.purchased'\n}\n","export * from './interfaces/filters/order.filter';\nexport * from './interfaces/filters/order-param-pair';\nexport * from './interfaces/filters/pagination.filter';\nexport * from './interfaces/error.response';\n\nexport * from './models/dto/test.dto';\nexport * from './models/dto/user.dto';\nexport * from './models/dto/user-creation.dto';\nexport * from './models/dto/channel.dto';\nexport * from './models/dto/channel-creation.dto';\nexport * from './models/dto/widget.dto';\nexport * from './models/dto/stream-playback.dto';\n\nexport * from './models/filters/user.filter';\nexport * from './models/filters/channel.filter';\nexport * from './models/filters/widget.filter';\n\nexport * from './models/dto/list-with-totals';\n\nexport * from './enums/user-roles.enum';\nexport * from './enums/socket.enum';\nexport * from './enums/widgets-socket-events.enum';\nexport * from './enums/ionic-requisites.enum';\n\nexport * from './utils/utility-types';\n","const regExps = {\n  name: /^[A-Za-z0-9_-]*$/ \n}\n  \nexport default regExps;","const regExps = {\n  lastName: /^([A-Z][a-z]+)?(-[A-Z][a-z]*)?$/,\n  name: /^[A-Z][a-z]+(-[A-Z][a-z]*)?$/,\n  password: /(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%^&_*].*)/    \n}\n\nexport default regExps;","const regExps = {\n  coord: /^[1-9][0-9]{0,2}$/,\n  price: /^(?!0+[0-9])[0-9]{1,12}(?:\\.\\d{1,2})?$/, \n  title: /^[A-Za-z0-9_-]*$/\n}\n  \nexport default regExps;","import { \n  MaxLength, \n  MinLength, \n  Matches \n} from 'class-validator';\nimport regExps from '../constants/channel-dto.constants';\n\n\nexport class ChannelDto {\n  @Matches(regExps.name, {\n\t\tmessage: 'Wrong symbols!',\n\t})\n\t@MinLength(2, { \n    message: 'Name is too short or empty' \n  })\n\t@MaxLength(20, {\n\t\tmessage: 'Name is too long',\n\t})\n  name: string;\n  \n  id?: string;\n  key?: string;\n  ingestEndpoint?: string;\n  playbackURL?: string;\n  ARN?: string;\n  createdAt?: Date;\n  updatedAt?: Date;\n}","export class ListWithTotals<T> {\n  list: T[];\n\n  total: number;\n  offset: number;\n  limit: number;\n}\n","import { IsNotEmpty } from 'class-validator';\n  \nexport class StreamPlaybackDto {\n  @IsNotEmpty()\n  playbackUrl: string;\n  \n  channelArn?: string;\n  health?: string;\n  startTime?: Date;\n  state?: string;\n  streamId?: string;\n  viewerCount?: number\n}","import { \n  IsEmail, \n  MaxLength, \n  MinLength, \n  Matches, \n  IsNotEmpty \n} from 'class-validator';\nimport regExps from '../constants/user-dto.constants';\n\n\nexport interface UserDto {\n  id: string;\n  name: string;\n  email: string;\n  password?: string;\n  createdAt?: Date;\n  updatedAt?: Date;\n}\n\nexport class LoginDto {\n  @IsEmail()\n  @IsNotEmpty()\n  email: string;\n\n  @Matches(regExps.password, {\n\t  message: 'Password must include upper & lower case letters, a number, a special character'\n  })\n  @MinLength(6, { \n    message: 'Password is too short' \n  })\n  @MaxLength(20, {\n\t  message: 'Password is too long'\n  })\n  password: string;\n}\n\nexport class SignUpDto {\n  @Matches(regExps.name, {\n\t  message: 'Only Latin! First character - a capital letter'\n  })\n  @MinLength(2, { \n    message: 'Name is too short' \n  })\n  @MaxLength(20, {\n\t  message: 'Name is too long'\n  })\n  name: string;\n\n  @Matches(regExps.lastName, {\n\t  message: 'Only Latin! First character - a capital letter'\n  })\n  @MinLength(2, { \n    message: 'Lastname is too short' \n  })\n  @MaxLength(25, {\n\t  message: 'Lastname is too long'\n  })\n  lastName?: string;\n\n  @IsNotEmpty()\n  @IsEmail()\n  email: string;\n\n  @Matches(regExps.password, {\n\t  message: 'Password must include upper & lower case letters, a number, a special character'\n  })\n  @MinLength(6, { \n    message: 'Password is too short' \n  })\n  @MaxLength(20, {\n\t  message: 'Password is too long'\n  })\n  password: string;\n}\n\nexport interface ValidateUserDto {\n  user?: UserDto;\n  error?: boolean;\n  message?: string;\n}","import {\n  IsUrl,  \n  Matches, \n  MinLength, \n  MaxLength, \n  NotEquals\n} from 'class-validator';\nimport regExps from '../constants/widget-dto.constants';\n\n\nexport class WidgetDto {\n  @Matches(regExps.title, {\n\t\tmessage: 'Wrong symbols!',\n\t})\n\t@MinLength(2, { \n    message: 'Name is too short or empty' \n  })\n\t@MaxLength(20, {\n\t\tmessage: 'Name is too long',\n\t})\n  title: string;\n  \n  @IsUrl()\n  url: string;\n\n  @Matches(regExps.price, {\n\t\tmessage: 'Enter correct number for price',\n\t})\n  @NotEquals('0', {\n    message: 'Price must be greater than zero'\n  })\n  price: number;\n\n  @Matches(regExps.coord, {\n\t\tmessage: 'Must be greater than zero. Maximum - 3 digits',\n\t})\n  startX: number;\n\n  @Matches(regExps.coord, {\n\t\tmessage: 'Must be greater than zero. Maximum - 3 digits',\n\t})\n  startY: number;\n\n  id?: string;\n  channelId?: string;\n  createdAt?: Date;\n  updatedAt?: Date;\n}\n\nexport class WidgetInStoreDto extends WidgetDto {\n  quantity: number;\n}\n\nexport class WidgetIdsDto {\n  channelId?: string;\n  ids: string[]\n}","module.exports = require(\"@aws-sdk/client-ivs\");","module.exports = require(\"@nestjs/common\");","module.exports = require(\"@nestjs/common/utils/shared.utils\");","module.exports = require(\"@nestjs/core\");","module.exports = require(\"@nestjs/event-emitter\");","module.exports = require(\"@nestjs/jwt\");","module.exports = require(\"@nestjs/passport\");","module.exports = require(\"@nestjs/platform-socket.io\");","module.exports = require(\"@nestjs/serve-static\");","module.exports = require(\"@nestjs/swagger\");","module.exports = require(\"@nestjs/terminus\");","module.exports = require(\"@nestjs/typeorm\");","module.exports = require(\"@nestjs/websockets\");","module.exports = require(\"bcryptjs\");","module.exports = require(\"class-validator\");","module.exports = require(\"dotenv\");","module.exports = require(\"dotenv-expand\");","module.exports = require(\"express\");","module.exports = require(\"lodash\");","module.exports = require(\"nest-winston\");","module.exports = require(\"passport-jwt\");","module.exports = require(\"passport-local\");","module.exports = require(\"socket.io\");","module.exports = require(\"swagger-stats\");","module.exports = require(\"tslib\");","module.exports = require(\"typeorm\");","module.exports = require(\"typeorm/query-builder/SelectQueryBuilder\");","module.exports = require(\"umzug\");","module.exports = require(\"uuid\");","module.exports = require(\"winston\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { NestFactory } from '@nestjs/core';\nimport {\n  utilities as nestWinstonModuleUtilities,\n  WinstonModule,\n} from 'nest-winston';\nimport * as swStats from 'swagger-stats';\nimport * as winston from 'winston';\nimport { ValidationPipe } from '@nestjs/common';\nimport { AppModule } from './app.module';\nimport { DocumentBuilder, SwaggerModule } from '@nestjs/swagger';\nimport AllExceptionsFilter from './exceptions-filters/all-exceptions.filter';\nimport BadRequestExceptionsFilter from './exceptions-filters/bad-request-exceptions.filter';\nimport * as Transport from 'winston-transport';\nimport { IoAdapter } from \"@nestjs/platform-socket.io\";\n\nasync function bootstrap(): Promise<void> {\n  const transports: Transport[] = [];\n\n  if (process.env.NODE_ENV === 'production') {\n    transports.push(\n      new winston.transports.Console({\n        format: winston.format.combine(\n          winston.format.timestamp(),\n          winston.format.ms(),\n          winston.format.json()\n        ),\n        level: 'debug'\n      })\n    );\n  } else {\n    transports.push(\n      new winston.transports.Console({\n        format: winston.format.combine(\n          winston.format.timestamp(),\n          winston.format.ms(),\n          nestWinstonModuleUtilities.format.nestLike()\n        ),\n        level: 'debug'\n      })\n    );\n  }\n\n  const app = await NestFactory.create(AppModule, {\n    cors: true,\n    logger: WinstonModule.createLogger({\n      transports,\n    }),\n  });\n\n  // app.enableCors({ origin: 'http://localhost:4200', credentials: true });\n\n  app.enableCors();\n\n  const config = new DocumentBuilder()\n    .setTitle('API')\n    .setVersion('1.0')\n    .build();\n  const document = SwaggerModule.createDocument(app, config);\n  SwaggerModule.setup('docs', app, document);\n\n  app.useGlobalFilters(\n    new AllExceptionsFilter(),\n    new BadRequestExceptionsFilter()\n  );\n\n  app.useGlobalPipes(\n    new ValidationPipe({ transform: true })\n  );\n\n  app.setGlobalPrefix('api');\n\n\tapp.useWebSocketAdapter(new IoAdapter(app));\n\n  app.use(swStats.getMiddleware({ swaggerSpec: document }));\n\n  await app.listen(3000);\n}\n\nbootstrap();\n"],"names":[],"sourceRoot":""}