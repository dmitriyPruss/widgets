{"ast":null,"code":"import { io } from 'socket.io-client';\nimport { SocketEnum } from '@boilerplate/shared';\nexport default class SocketClient {\n  constructor() {\n    this.socket = void 0;\n    this.baseUrl = void 0;\n    this.baseUrl = 'http://localhost:3000/api';\n  }\n\n  connect() {\n    if (!this.baseUrl) {\n      return;\n    }\n\n    if (this.socket) {\n      this.disconnect();\n    }\n\n    this.socket = io(this.baseUrl, {\n      query: {\n        id: 'e2f76bd0-055f-4602-b44b-64c2d26d5bbf'\n      },\n      transports: ['websocket', 'polling'],\n      reconnection: true,\n      reconnectionDelay: 7000\n    });\n    this.socket.connect();\n    console.log('this.socket - ', this.socket);\n    console.log('Front Socket is connected');\n  }\n\n  disconnect() {\n    var _this$socket;\n\n    if ((_this$socket = this.socket) != null && _this$socket.active) {\n      this.socket.disconnect();\n    }\n\n    this.socket = null;\n    console.log('Front Socket is disconnected');\n  } // Widgets\n\n\n  joinPaginationWidgets(id) {\n    var _this$socket2;\n\n    (_this$socket2 = this.socket) == null ? void 0 : _this$socket2.emit('join-pag-widgets', {\n      id\n    });\n    console.log('Join widgets');\n  }\n\n  leftPaginationWidgets(id) {\n    var _this$socket3;\n\n    (_this$socket3 = this.socket) == null ? void 0 : _this$socket3.emit('left-pag-widgets', {\n      id\n    });\n    console.log('Left widgets');\n  }\n\n  subscribeOnNewWidgets(id, handler) {\n    var _this$socket4;\n\n    (_this$socket4 = this.socket) == null ? void 0 : _this$socket4.on(`${SocketEnum.ReceivedWidgets}_${id}`, handler);\n    console.log('Subscribe widgets');\n  }\n\n  unsubscribeOnNewWidgets(id) {\n    var _this$socket5;\n\n    (_this$socket5 = this.socket) == null ? void 0 : _this$socket5.off(`${SocketEnum.ReceivedWidgets}_${id}`);\n    console.log('Unsubscribe widgets');\n  } // Visible Widgets\n\n\n  joinVisibleWidgets(id) {\n    var _this$socket6;\n\n    (_this$socket6 = this.socket) == null ? void 0 : _this$socket6.emit(SocketEnum.JoinVisibleWidgets, {\n      id\n    });\n    console.log('Join visible widgets');\n  }\n\n  leftVisibleWidgets(id) {\n    var _this$socket7;\n\n    (_this$socket7 = this.socket) == null ? void 0 : _this$socket7.emit(SocketEnum.LeftVisibleWidgets, {\n      id\n    });\n    console.log('Left visible widgets');\n  }\n\n  subscribeOnNewVisibleWidgets(id, handler) {\n    var _this$socket8;\n\n    (_this$socket8 = this.socket) == null ? void 0 : _this$socket8.on(`${SocketEnum.ReceivedVisibleWidgets}_${id}`, handler);\n    console.log('Subscribe visible widgets');\n  }\n\n  unsubscribeOnNewVisibleWidgets(id) {\n    var _this$socket9;\n\n    (_this$socket9 = this.socket) == null ? void 0 : _this$socket9.off(`${SocketEnum.ReceivedVisibleWidgets}_${id}`);\n    console.log('Unsubscribe visible widgets');\n  }\n\n}","map":{"version":3,"sources":["/home/user/Документы/Work/2023/training/apps/frontend/src/socket/client.socket.ts"],"names":["io","SocketEnum","SocketClient","constructor","socket","baseUrl","connect","disconnect","query","id","transports","reconnection","reconnectionDelay","console","log","active","joinPaginationWidgets","emit","leftPaginationWidgets","subscribeOnNewWidgets","handler","on","ReceivedWidgets","unsubscribeOnNewWidgets","off","joinVisibleWidgets","JoinVisibleWidgets","leftVisibleWidgets","LeftVisibleWidgets","subscribeOnNewVisibleWidgets","ReceivedVisibleWidgets","unsubscribeOnNewVisibleWidgets"],"mappings":"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","sourcesContent":["import { Socket, io } from 'socket.io-client';\nimport { IonicRequisitesEnum, SocketEnum, WidgetDto } from '@boilerplate/shared';\n\n\nexport default class SocketClient {\n  private socket: Socket | null;\n  private readonly baseUrl: string;\n\n  constructor() {\n\tthis.baseUrl = 'http://localhost:3000/api';\n  }\n\n  public connect() {\n\tif (!this.baseUrl) {\n\t  return;\n\t}\n\n\tif (this.socket) {\n\t  this.disconnect();\n\t}\n\n\tthis.socket = io(this.baseUrl, {\n\t  query: { \n\t\tid: 'e2f76bd0-055f-4602-b44b-64c2d26d5bbf'\n\t  },\n\t  transports: ['websocket', 'polling'],\n\t  reconnection: true,\n\t  reconnectionDelay: 7000\n\t});\n\n\tthis.socket.connect();\n\n\tconsole.log('this.socket - ', this.socket);\n\n\tconsole.log('Front Socket is connected');\n  }\n\n  public disconnect() {\n\tif (this.socket?.active) {\n\t  this.socket.disconnect();\n\t}\n\n\tthis.socket = null;\n\t\t\n\tconsole.log('Front Socket is disconnected');\n  }\n\n\n  // Widgets\n  public joinPaginationWidgets(id: string) {\n\tthis.socket?.emit('join-pag-widgets', { id });\n\n\tconsole.log('Join widgets');\n  }\n\n  public leftPaginationWidgets(id: string) {\n\tthis.socket?.emit('left-pag-widgets', { id });\n\n\tconsole.log('Left widgets');\n  }\n\n  public subscribeOnNewWidgets(id: string, handler: (data: WidgetDto[]) => void): void {\n\tthis.socket?.on(`${SocketEnum.ReceivedWidgets}_${id}`, handler);\n\n\tconsole.log('Subscribe widgets');\n  }\n\n  public unsubscribeOnNewWidgets(id: string): void {\n\tthis.socket?.off(`${SocketEnum.ReceivedWidgets}_${id}`);\n\n\tconsole.log('Unsubscribe widgets');\n  }\n\n    // Visible Widgets\n\tpublic joinVisibleWidgets(id: string) {\n\t\tthis.socket?.emit(SocketEnum.JoinVisibleWidgets, { id });\n\t\n\t\tconsole.log('Join visible widgets');\n\t  }\n\t\n\t  public leftVisibleWidgets(id: string) {\n\t\tthis.socket?.emit(SocketEnum.LeftVisibleWidgets, { id });\n\t\n\t\tconsole.log('Left visible widgets');\n\t  }\n\t\n\t  public subscribeOnNewVisibleWidgets(id: string, handler: (data: WidgetDto[]) => void): void {\n\t\tthis.socket?.on(`${SocketEnum.ReceivedVisibleWidgets}_${id}`, handler);\n\t\n\t\tconsole.log('Subscribe visible widgets');\n\t  }\n\t\n\t  public unsubscribeOnNewVisibleWidgets(id: string): void {\n\t\tthis.socket?.off(`${SocketEnum.ReceivedVisibleWidgets}_${id}`);\n\t\n\t\tconsole.log('Unsubscribe visible widgets');\n\t  }\n}\n"]},"metadata":{},"sourceType":"module"}