{"ast":null,"code":"import \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { createSlice } from '@reduxjs/toolkit';\nconst initialState = {\n  totalWidgetsQuantity: 0,\n  widgets: [],\n  widgetsInStore: []\n};\nexport const widgetsStoreSlice = createSlice({\n  name: 'widgets-store',\n  initialState,\n  reducers: {\n    increment: state => {\n      state.totalWidgetsQuantity += 1;\n    },\n    decrement: state => {\n      state.totalWidgetsQuantity -= 1;\n    },\n    setWidgets: (state, action) => {\n      state.widgets = action.payload;\n    },\n    incrementWidget: (state, action) => {\n      const foundWidget = state.widgetsInStore.find(widget => {\n        var _action$payload;\n\n        return widget.id === ((_action$payload = action.payload) == null ? void 0 : _action$payload.id);\n      });\n\n      if (!foundWidget) {\n        const newWidget = Object.assign({}, action.payload, {\n          quantity: 1\n        });\n        state.widgetsInStore = [...state.widgetsInStore, newWidget];\n        state.totalWidgetsQuantity = state.totalWidgetsQuantity > 100 ? 100 : state.totalWidgetsQuantity + 1;\n        return;\n      }\n\n      const newQuantity = (foundWidget == null ? void 0 : foundWidget.quantity) + 1;\n      const updatedWidget = Object.assign({}, foundWidget, {\n        quantity: newQuantity\n      });\n      const newWidgets = state.widgetsInStore;\n      const updatedWidgets = newWidgets == null ? void 0 : newWidgets.map(widget => {\n        if (widget.id === updatedWidget.id) {\n          widget.quantity = updatedWidget.quantity;\n        }\n\n        return widget;\n      });\n      state.widgetsInStore = [...updatedWidgets];\n      console.log('INCREMENT updatedWidgets - ', state.widgetsInStore);\n      state.totalWidgetsQuantity = state.totalWidgetsQuantity > 100 ? 100 : state.totalWidgetsQuantity + 1;\n    },\n    decrementWidget: (state, action) => {\n      const foundWidget = state.widgetsInStore.find(widget => widget.id === action.payload.id);\n\n      if (!foundWidget) {\n        return;\n      }\n\n      const newQuantity = (foundWidget == null ? void 0 : foundWidget.quantity) <= 0 ? 0 : (foundWidget == null ? void 0 : foundWidget.quantity) - 1;\n      const updatedWidget = Object.assign({}, foundWidget, {\n        quantity: newQuantity\n      });\n      const newWidgets = state.widgetsInStore;\n      const updatedWidgets = newWidgets == null ? void 0 : newWidgets.map(widget => {\n        if (widget.id === updatedWidget.id) {\n          widget.quantity = updatedWidget.quantity;\n        }\n\n        return widget;\n      });\n      state.widgetsInStore = [...updatedWidgets];\n      console.log('DECREMENT updatedWidgets - ', state.widgetsInStore);\n      state.totalWidgetsQuantity = state.totalWidgetsQuantity <= 0 ? 0 : state.totalWidgetsQuantity - 1;\n    }\n  }\n});\nexport const {\n  increment,\n  decrement,\n  incrementWidget,\n  decrementWidget,\n  setWidgets\n} = widgetsStoreSlice.actions;\nexport default widgetsStoreSlice.reducer;","map":{"version":3,"sources":["/home/user/Документы/Work/2023/training/libs/store/src/rtk-store/reducers/widgets-store.slice.ts"],"names":["createSlice","initialState","totalWidgetsQuantity","widgets","widgetsInStore","widgetsStoreSlice","name","reducers","increment","state","decrement","setWidgets","action","payload","incrementWidget","foundWidget","find","widget","id","newWidget","quantity","newQuantity","updatedWidget","newWidgets","updatedWidgets","map","console","log","decrementWidget","actions","reducer"],"mappings":";;;AAAA,SAASA,WAAT,QAA2C,kBAA3C;AASA,MAAMC,YAA+B,GAAG;AACtCC,EAAAA,oBAAoB,EAAE,CADgB;AAEtCC,EAAAA,OAAO,EAAE,EAF6B;AAGtCC,EAAAA,cAAc,EAAE;AAHsB,CAAxC;AAMA,OAAO,MAAMC,iBAAiB,GAAGL,WAAW,CAAC;AAC3CM,EAAAA,IAAI,EAAE,eADqC;AAE3CL,EAAAA,YAF2C;AAG3CM,EAAAA,QAAQ,EAAE;AACRC,IAAAA,SAAS,EAAGC,KAAD,IAAW;AACpBA,MAAAA,KAAK,CAACP,oBAAN,IAA8B,CAA9B;AACD,KAHO;AAIRQ,IAAAA,SAAS,EAAGD,KAAD,IAAW;AACpBA,MAAAA,KAAK,CAACP,oBAAN,IAA8B,CAA9B;AACD,KANO;AAORS,IAAAA,UAAU,EAAE,CAACF,KAAD,EAAQG,MAAR,KAA+C;AACzDH,MAAAA,KAAK,CAACN,OAAN,GAAgBS,MAAM,CAACC,OAAvB;AACD,KATO;AAURC,IAAAA,eAAe,EAAE,CAACL,KAAD,EAAQG,MAAR,KAA6C;AAC5D,YAAMG,WAAW,GAAGN,KAAK,CAACL,cAAN,CAAqBY,IAArB,CAA0BC,MAAM;AAAA;;AAAA,eAAIA,MAAM,CAACC,EAAP,yBAAcN,MAAM,CAACC,OAArB,qBAAc,gBAAgBK,EAA9B,CAAJ;AAAA,OAAhC,CAApB;;AAEA,UAAI,CAACH,WAAL,EAAkB;AAChB,cAAMI,SAA2B,qBAAQP,MAAM,CAACC,OAAf;AAAwBO,UAAAA,QAAQ,EAAE;AAAlC,UAAjC;AAEAX,QAAAA,KAAK,CAACL,cAAN,GAAuB,CAAC,GAAGK,KAAK,CAACL,cAAV,EAA0Be,SAA1B,CAAvB;AAEAV,QAAAA,KAAK,CAACP,oBAAN,GAA6BO,KAAK,CAACP,oBAAN,GAA6B,GAA7B,GACzB,GADyB,GACnBO,KAAK,CAACP,oBAAN,GAA6B,CADvC;AAGA;AACD;;AAED,YAAMmB,WAAW,GAAG,CAAAN,WAAW,QAAX,YAAAA,WAAW,CAAEK,QAAb,IAAwB,CAA5C;AAEA,YAAME,aAAa,qBAAQP,WAAR;AAAqBK,QAAAA,QAAQ,EAAEC;AAA/B,QAAnB;AAEA,YAAME,UAAU,GAAGd,KAAK,CAACL,cAAzB;AAEA,YAAMoB,cAAc,GAAGD,UAAH,oBAAGA,UAAU,CAAEE,GAAZ,CAAgBR,MAAM,IAAI;AAC/C,YAAGA,MAAM,CAACC,EAAP,KAAcI,aAAa,CAACJ,EAA/B,EAAmC;AACjCD,UAAAA,MAAM,CAACG,QAAP,GAAkBE,aAAa,CAACF,QAAhC;AACD;;AAED,eAAOH,MAAP;AACD,OANsB,CAAvB;AAQAR,MAAAA,KAAK,CAACL,cAAN,GAAuB,CAAC,GAAGoB,cAAJ,CAAvB;AAEAE,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2ClB,KAAK,CAACL,cAAjD;AAEAK,MAAAA,KAAK,CAACP,oBAAN,GAA6BO,KAAK,CAACP,oBAAN,GAA6B,GAA7B,GACzB,GADyB,GACnBO,KAAK,CAACP,oBAAN,GAA6B,CADvC;AAED,KA5CO;AA6CR0B,IAAAA,eAAe,EAAE,CAACnB,KAAD,EAAQG,MAAR,KAA6C;AAC5D,YAAMG,WAAW,GAAGN,KAAK,CAACL,cAAN,CAAqBY,IAArB,CAA0BC,MAAM,IAAIA,MAAM,CAACC,EAAP,KAAcN,MAAM,CAACC,OAAP,CAAeK,EAAjE,CAApB;;AAEA,UAAI,CAACH,WAAL,EAAkB;AAChB;AACD;;AAED,YAAMM,WAAW,GAAG,CAAAN,WAAW,QAAX,YAAAA,WAAW,CAAEK,QAAb,KAAyB,CAAzB,GAA6B,CAA7B,GAAiC,CAAAL,WAAW,QAAX,YAAAA,WAAW,CAAEK,QAAb,IAAwB,CAA7E;AAEA,YAAME,aAAa,qBAAQP,WAAR;AAAqBK,QAAAA,QAAQ,EAAEC;AAA/B,QAAnB;AAEA,YAAME,UAAU,GAAGd,KAAK,CAACL,cAAzB;AAEA,YAAMoB,cAAc,GAAGD,UAAH,oBAAGA,UAAU,CAAEE,GAAZ,CAAgBR,MAAM,IAAI;AAC/C,YAAGA,MAAM,CAACC,EAAP,KAAcI,aAAa,CAACJ,EAA/B,EAAmC;AACjCD,UAAAA,MAAM,CAACG,QAAP,GAAkBE,aAAa,CAACF,QAAhC;AACD;;AAED,eAAOH,MAAP;AACD,OANsB,CAAvB;AAQAR,MAAAA,KAAK,CAACL,cAAN,GAAuB,CAAC,GAAGoB,cAAJ,CAAvB;AAEAE,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2ClB,KAAK,CAACL,cAAjD;AAEAK,MAAAA,KAAK,CAACP,oBAAN,GAA6BO,KAAK,CAACP,oBAAN,IAA8B,CAA9B,GACzB,CADyB,GACrBO,KAAK,CAACP,oBAAN,GAA6B,CADrC;AAED;AAxEO;AAHiC,CAAD,CAArC;AA+EP,OAAO,MAAM;AACXM,EAAAA,SADW;AAEXE,EAAAA,SAFW;AAGXI,EAAAA,eAHW;AAIXc,EAAAA,eAJW;AAKXjB,EAAAA;AALW,IAMTN,iBAAiB,CAACwB,OANf;AAQP,eAAexB,iBAAiB,CAACyB,OAAjC","sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { WidgetDto, WidgetInStoreDto } from '@boilerplate/shared';\n\nexport interface WidgetsStoreState {\n  totalWidgetsQuantity: number,\n  widgets: WidgetDto[],\n  widgetsInStore: WidgetInStoreDto[]\n}\n\nconst initialState: WidgetsStoreState = {\n  totalWidgetsQuantity: 0,\n  widgets: [],\n  widgetsInStore: []\n}\n\nexport const widgetsStoreSlice = createSlice({\n  name: 'widgets-store',\n  initialState,\n  reducers: {\n    increment: (state) => {\n      state.totalWidgetsQuantity += 1\n    },\n    decrement: (state) => {\n      state.totalWidgetsQuantity -= 1\n    },\n    setWidgets: (state, action: PayloadAction<WidgetDto[]>) => {\n      state.widgets = action.payload;\n    },\n    incrementWidget: (state, action: PayloadAction<WidgetDto>) => {\n      const foundWidget = state.widgetsInStore.find(widget => widget.id === action.payload?.id);\n\n      if (!foundWidget) {\n        const newWidget: WidgetInStoreDto = { ...action.payload, quantity: 1 };\n\n        state.widgetsInStore = [...state.widgetsInStore, newWidget];\n\n        state.totalWidgetsQuantity = state.totalWidgetsQuantity > 100 \n          ? 100 : state.totalWidgetsQuantity + 1;\n\n        return;\n      }\n\n      const newQuantity = foundWidget?.quantity + 1;\n\n      const updatedWidget = { ...foundWidget, quantity: newQuantity};\n\n      const newWidgets = state.widgetsInStore;\n\n      const updatedWidgets = newWidgets?.map(widget => {\n        if(widget.id === updatedWidget.id) {\n          widget.quantity = updatedWidget.quantity;\n        }\n\n        return widget;\n      });\n\n      state.widgetsInStore = [...updatedWidgets as any];\n\n      console.log('INCREMENT updatedWidgets - ', state.widgetsInStore);\n\n      state.totalWidgetsQuantity = state.totalWidgetsQuantity > 100 \n        ? 100 : state.totalWidgetsQuantity + 1;\n    },\n    decrementWidget: (state, action: PayloadAction<WidgetDto>) => {\n      const foundWidget = state.widgetsInStore.find(widget => widget.id === action.payload.id);\n      \n      if (!foundWidget) {\n        return;\n      }\n\n      const newQuantity = foundWidget?.quantity <= 0 ? 0 : foundWidget?.quantity - 1;\n\n      const updatedWidget = { ...foundWidget, quantity: newQuantity };\n\n      const newWidgets = state.widgetsInStore;\n\n      const updatedWidgets = newWidgets?.map(widget => {\n        if(widget.id === updatedWidget.id) {\n          widget.quantity = updatedWidget.quantity\n        }\n\n        return widget;\n      });\n\n      state.widgetsInStore = [...updatedWidgets as any];\n\n      console.log('DECREMENT updatedWidgets - ', state.widgetsInStore);\n\n      state.totalWidgetsQuantity = state.totalWidgetsQuantity <= 0 \n        ? 0 : state.totalWidgetsQuantity - 1;\n    }\n  }\n});\n\nexport const { \n  increment, \n  decrement, \n  incrementWidget, \n  decrementWidget,\n  setWidgets \n} = widgetsStoreSlice.actions;\n\nexport default widgetsStoreSlice.reducer;"]},"metadata":{},"sourceType":"module"}