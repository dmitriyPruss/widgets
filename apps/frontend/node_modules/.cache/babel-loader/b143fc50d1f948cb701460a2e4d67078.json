{"ast":null,"code":"var _jsxFileName = \"/home/user/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/Work/2023/training/apps/frontend/src/components/widget-form/widget-form.component.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Box, Button, Dialog, DialogContent, DialogTitle, FormControl, FormHelperText, TextField } from '@mui/material';\nimport CloseIcon from '@mui/icons-material/Close';\nimport { classValidatorResolver } from '@hookform/resolvers/class-validator';\nimport RouterSuspense from '../router-suspense/router-suspense.component';\nimport { useAddNewWidgetMutation } from '@boilerplate/store';\nimport { WidgetDto } from '@boilerplate/shared';\nimport { closeIconStyle, dialogStyle, dialogContentStyle, errorStyle } from './widget-form.styles';\nimport useShowError from '../../hooks/use-show-error.hooks';\nimport { jsxDEV as _jsxDEV } from \"@emotion/react/jsx-dev-runtime\";\nconst resolver = classValidatorResolver(WidgetDto);\n\nconst WidgetForm = ({\n  id,\n  enqueueSnackbar\n}) => {\n  _s();\n\n  var _errors$title, _errors$url, _errors$price, _errors$startX, _errors$startY;\n\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver\n  });\n  const [open, setOpen] = useState(true);\n  const closeHandler = useCallback(() => {\n    setOpen(false);\n  }, []);\n  const [addNewWidget, {\n    isLoading,\n    error\n  }] = useAddNewWidgetMutation();\n\n  const onConfirm = async e => {\n    e.preventDefault();\n    await handleSubmit(async value => {\n      try {\n        value['channelId'] = id;\n        await addNewWidget(value);\n        closeHandler();\n      } catch (e) {\n        console.error(e.message);\n      }\n    })();\n  };\n\n  useShowError({\n    error,\n    enqueueSnackbar\n  });\n  return _jsxDEV(Dialog, {\n    open: open,\n    maxWidth: \"md\",\n    keepMounted: true,\n    onClose: closeHandler,\n    \"aria-describedby\": \"alert-dialog-slide-description\",\n    sx: dialogStyle,\n    children: [isLoading && _jsxDEV(Box, {\n      width: \"100%\",\n      position: \"absolute\",\n      height: \"100%\",\n      top: 0,\n      left: 0,\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      zIndex: 10,\n      bgcolor: \"#fff\",\n      sx: {\n        opacity: '0.7'\n      },\n      children: _jsxDEV(RouterSuspense, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }, this), _jsxDEV(Box, {\n      m: 1.2,\n      boxSizing: \"border-box\",\n      width: \"570px\",\n      children: [_jsxDEV(DialogTitle, {\n        children: \"Create Widget\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), _jsxDEV(DialogContent, {\n        sx: dialogContentStyle,\n        children: [_jsxDEV(CloseIcon, {\n          sx: closeIconStyle,\n          onClick: closeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), _jsxDEV(\"form\", {\n          onSubmit: async e => {\n            await onConfirm(e);\n          },\n          children: [_jsxDEV(Box, {\n            display: \"flex\",\n            height: \"300px\",\n            mt: 3,\n            flexDirection: \"column\",\n            justifyContent: \"space-between\",\n            children: [_jsxDEV(FormControl, {\n              fullWidth: true,\n              children: [_jsxDEV(TextField, Object.assign({\n                required: true,\n                autoComplete: \"current-title\",\n                autoFocus: true,\n                label: \"Title\",\n                error: !!errors.title,\n                \"aria-describedby\": \"component-error-title\"\n              }, register('title')), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 11\n              }, this), _jsxDEV(FormHelperText, {\n                error: true,\n                id: \"component-error-title\",\n                sx: errorStyle,\n                children: (_errors$title = errors.title) == null ? void 0 : _errors$title.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this), _jsxDEV(FormControl, {\n              fullWidth: true,\n              children: [_jsxDEV(TextField, Object.assign({\n                required: true,\n                autoComplete: \"current-title\",\n                label: \"URL\",\n                error: !!errors.url,\n                \"aria-describedby\": \"component-error-url\"\n              }, register('url')), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 11\n              }, this), _jsxDEV(FormHelperText, {\n                error: true,\n                id: \"component-error-url\",\n                sx: errorStyle,\n                children: (_errors$url = errors.url) == null ? void 0 : _errors$url.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this), _jsxDEV(FormControl, {\n              fullWidth: true,\n              children: [_jsxDEV(TextField, Object.assign({\n                required: true,\n                autoComplete: \"current-price\",\n                label: \"Price\",\n                error: !!errors.price,\n                \"aria-describedby\": \"component-error-price\"\n              }, register('price')), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 11\n              }, this), _jsxDEV(FormHelperText, {\n                error: true,\n                id: \"component-error-price\",\n                sx: errorStyle,\n                children: (_errors$price = errors.price) == null ? void 0 : _errors$price.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, this), _jsxDEV(Box, {\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              children: [_jsxDEV(FormControl, {\n                children: [_jsxDEV(TextField, Object.assign({\n                  required: true,\n                  autoComplete: \"current-startX\",\n                  label: \"Start X\",\n                  type: \"number\",\n                  error: !!errors.startX,\n                  \"aria-describedby\": \"component-error-start-x\"\n                }, register('startX')), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 13\n                }, this), _jsxDEV(FormHelperText, {\n                  error: true,\n                  id: \"component-error-start-x\",\n                  sx: errorStyle,\n                  children: (_errors$startX = errors.startX) == null ? void 0 : _errors$startX.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this), _jsxDEV(FormControl, {\n                children: [_jsxDEV(TextField, Object.assign({\n                  required: true,\n                  autoComplete: \"current-startY\",\n                  label: \"Start Y\",\n                  type: \"number\",\n                  error: !!errors.startY,\n                  \"aria-describedby\": \"component-error-start-y\"\n                }, register('startY')), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 13\n                }, this), _jsxDEV(FormHelperText, {\n                  error: true,\n                  id: \"component-error-start-y\",\n                  sx: errorStyle,\n                  children: (_errors$startY = errors.startY) == null ? void 0 : _errors$startY.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this), _jsxDEV(Box, {\n            display: \"flex\",\n            justifyContent: \"flex-end\",\n            alignItems: \"flex-end\",\n            height: \"100px\",\n            mb: 2,\n            children: [_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"error\",\n              onClick: closeHandler,\n              sx: {\n                marginRight: '10px'\n              },\n              children: \"CANCEL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, this), _jsxDEV(Button, {\n              variant: \"contained\",\n              type: \"submit\",\n              children: \"CONFIRM\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n\n_s(WidgetForm, \"/TAFcYKx7Z7+X7FBNsvMwG7GxuY=\", false, function () {\n  return [useForm, useAddNewWidgetMutation, useShowError];\n});\n\n_c = WidgetForm;\nexport default WidgetForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"WidgetForm\");","map":{"version":3,"sources":["/home/user/Документы/Work/2023/training/apps/frontend/src/components/widget-form/widget-form.component.tsx"],"names":["React","useCallback","useState","useForm","Box","Button","Dialog","DialogContent","DialogTitle","FormControl","FormHelperText","TextField","CloseIcon","classValidatorResolver","RouterSuspense","useAddNewWidgetMutation","WidgetDto","closeIconStyle","dialogStyle","dialogContentStyle","errorStyle","useShowError","resolver","WidgetForm","id","enqueueSnackbar","register","handleSubmit","formState","errors","open","setOpen","closeHandler","addNewWidget","isLoading","error","onConfirm","e","preventDefault","value","console","message","opacity","title","url","price","startX","startY","marginRight"],"mappings":"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","sourcesContent":["import React, { FC, useCallback, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport {\n  Box,\n  Button,\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  FormControl,\n  FormHelperText,\n  TextField\n} from '@mui/material';\nimport CloseIcon from '@mui/icons-material/Close';\nimport { classValidatorResolver } from '@hookform/resolvers/class-validator';\nimport RouterSuspense from '../router-suspense/router-suspense.component';\nimport {\n\tuseAddNewWidgetMutation\n} from '@boilerplate/store';\nimport { WidgetDto } from '@boilerplate/shared';\nimport { IWidgetFormProps } from './widget-form.types';\nimport {\n  closeIconStyle,\n  dialogStyle,\n  dialogContentStyle,\n  errorStyle\n} from './widget-form.styles';\nimport useShowError from '../../hooks/use-show-error.hooks';\n\n\nconst resolver = classValidatorResolver(WidgetDto);\n\nconst WidgetForm: FC<IWidgetFormProps> = (\n  { id, enqueueSnackbar }: IWidgetFormProps\n) => {\n  const { \n    register, \n    handleSubmit, \n    formState: { errors } \n  } = useForm<WidgetDto>({ resolver });\n\n\tconst [open, setOpen] = useState<boolean>(true);\n\n\tconst closeHandler = useCallback(() => {\n\t\tsetOpen(false);\n\t}, []);\n\n  const [addNewWidget, { isLoading, error }] = useAddNewWidgetMutation();\n\n  const onConfirm = async (e: React.FormEvent<HTMLFormElement>): Promise<void> => {\n    e.preventDefault();\n\n    await handleSubmit(\n      async (value) => {\n        try {\n\t\t\t\t\tvalue['channelId'] = id;\n\n          await addNewWidget(value);\n\n          closeHandler();\n        } catch (e: any) {\n          console.error(e.message);\n        }\n      }\n    )();\n  };\n\n  useShowError({ error, enqueueSnackbar });\n\n  return (\n    <Dialog\n      open={open}\n      maxWidth=\"md\"\n      keepMounted\n      onClose={closeHandler}\n      aria-describedby=\"alert-dialog-slide-description\"\n      sx={dialogStyle}\n    >\n      {isLoading && (\n\t\t\t\t<Box \n          width=\"100%\" \n          position=\"absolute\" \n          height=\"100%\" \n          top={0} \n          left={0}\n          display=\"flex\"\n          flexDirection=\"column\" \n          justifyContent=\"center\" \n          alignItems=\"center\" \n          zIndex={10} \n          bgcolor=\"#fff\"\n          sx={{opacity: '0.7'}}\n        >\n\t\t\t\t\t<RouterSuspense />\n        </Box>\n      )}\n      <Box m={1.2} boxSizing=\"border-box\" width=\"570px\">\n        <DialogTitle>\n          Create Widget\n        </DialogTitle>\n        <DialogContent sx={dialogContentStyle}>\n          <CloseIcon sx={closeIconStyle} onClick={closeHandler} />\n          <form onSubmit={async (e) => { await onConfirm(e); }}>\n            <Box \n              display=\"flex\" \n              height=\"300px\" \n              mt={3} \n              flexDirection=\"column\" \n              justifyContent=\"space-between\"\n            >\n              <FormControl fullWidth>\n\t\t\t\t\t\t    <TextField\n\t\t\t\t\t\t\t    required\n\t\t\t\t\t\t\t    autoComplete=\"current-title\"\n                  autoFocus\n                  label=\"Title\"\n                  error={!!errors.title}\n\t\t\t\t\t\t\t    aria-describedby=\"component-error-title\"\n\t\t\t\t\t\t\t    {...register('title')}\n\t\t\t\t\t\t    />\n\t\t\t\t\t\t    <FormHelperText error id=\"component-error-title\" sx={errorStyle}>\n\t\t\t\t\t\t\t    {errors.title?.message}\n\t\t\t\t\t\t    </FormHelperText>\n\t\t\t\t\t    </FormControl>\n              <FormControl fullWidth>\n\t\t\t\t\t\t    <TextField\n\t\t\t\t\t\t\t    required\n\t\t\t\t\t\t\t    autoComplete=\"current-title\"\n                  label=\"URL\"\n                  error={!!errors.url}\n\t\t\t\t\t\t\t    aria-describedby=\"component-error-url\"\n\t\t\t\t\t\t\t    {...register('url')}\n\t\t\t\t\t\t    />\n\t\t\t\t\t\t    <FormHelperText error id=\"component-error-url\" sx={errorStyle}>\n\t\t\t\t\t\t\t    {errors.url?.message}\n\t\t\t\t\t\t    </FormHelperText>\n\t\t\t\t\t    </FormControl>\n              <FormControl fullWidth>\n\t\t\t\t\t\t    <TextField\n\t\t\t\t\t\t\t    required\n\t\t\t\t\t\t\t    autoComplete=\"current-price\"\n                  label=\"Price\"\n                  error={!!errors.price}\n\t\t\t\t\t\t\t    aria-describedby=\"component-error-price\"\n\t\t\t\t\t\t\t    {...register('price')}\n\t\t\t\t\t\t    />\n\t\t\t\t\t\t    <FormHelperText error id=\"component-error-price\" sx={errorStyle}>\n\t\t\t\t\t\t\t    {errors.price?.message}\n\t\t\t\t\t\t    </FormHelperText>\n\t\t\t\t\t    </FormControl>\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"space-between\">\n                <FormControl>\n\t\t\t\t\t\t      <TextField\n\t\t\t\t\t\t\t      required\n\t\t\t\t\t\t\t      autoComplete=\"current-startX\"\n                    label=\"Start X\"\n                    type=\"number\"\n                    error={!!errors.startX}\n\t\t\t\t\t\t\t      aria-describedby=\"component-error-start-x\"\n\t\t\t\t\t\t\t      {...register('startX')}\n\t\t\t\t\t\t      />\n\t\t\t\t\t\t      <FormHelperText error id=\"component-error-start-x\" sx={errorStyle}>\n\t\t\t\t\t\t\t      {errors.startX?.message}\n\t\t\t\t\t\t      </FormHelperText>\n\t\t\t\t\t      </FormControl>\n                <FormControl>\n\t\t\t\t\t\t      <TextField\n\t\t\t\t\t\t\t      required\n\t\t\t\t\t\t\t      autoComplete=\"current-startY\"\n                    label=\"Start Y\"\n                    type=\"number\"\n                    error={!!errors.startY}\n\t\t\t\t\t\t\t      aria-describedby=\"component-error-start-y\"\n\t\t\t\t\t\t\t      {...register('startY')}\n\t\t\t\t\t\t      />\n\t\t\t\t\t\t      <FormHelperText error id=\"component-error-start-y\" sx={errorStyle}>\n\t\t\t\t\t\t\t      {errors.startY?.message}\n\t\t\t\t\t\t      </FormHelperText>\n\t\t\t\t\t      </FormControl>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n            <Box \n              display=\"flex\" \n              justifyContent=\"flex-end\" \n              alignItems=\"flex-end\" \n              height=\"100px\" \n              mb={2}\n            >\n              <Button\n                variant=\"contained\"\n\t\t\t\t\t\t\t\tcolor=\"error\"\n                onClick={closeHandler}\n\t\t\t\t\t\t\t\tsx={{marginRight: '10px'}}\n              >\n                CANCEL\n              </Button>\n              <Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n                type=\"submit\"\n              >\n                CONFIRM\n              </Button>\n            </Box>\n          </form>\n        </DialogContent>\n      </Box>\n    </Dialog>\n  );\n}\n\nexport default WidgetForm;\n"]},"metadata":{},"sourceType":"module"}